"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[574],{4964:(e,n,u)=>{var t=u(5112),a=t("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(u){try{return n[a]=!1,"/./"[e](n)}catch(t){}}return!1}},7850:(e,n,u)=>{var t=u(111),a=u(4326),r=u(5112),l=r("match");e.exports=function(e){var n;return t(e)&&(void 0!==(n=e[l])?!!n:"RegExp"===a(e))}},3929:(e,n,u)=>{var t=u(7850),a=TypeError;e.exports=function(e){if(t(e))throw a("The method doesn't accept regular expressions");return e}},6699:(e,n,u)=>{var t=u(2109),a=u(1318).includes,r=u(7293),l=u(1223),o=r((function(){return!Array(1).includes()}));t({target:"Array",proto:!0,forced:o},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l("includes")},2023:(e,n,u)=>{var t=u(2109),a=u(1702),r=u(3929),l=u(4488),o=u(1340),i=u(4964),c=a("".indexOf);t({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~c(o(l(this)),o(r(e)),arguments.length>1?arguments[1]:void 0)}})},7574:(e,n,u)=>{u.r(n),u.d(n,{default:()=>g});var t=u(124),a=u(9584),r=u(5082),l=u(8534),o=(u(7042),u(7327),u(1539),u(6699),u(2023),u(1249),u(7658),u(2564),u(6252)),i=u(2262),c=u(3577),s=u(286),f=u(316),d=u(6100),m=u(5856),p=u(4105),v=(0,o._)("h2",null,"Daftar Pengguna",-1),w=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Nama Lengkap"),(0,o._)("th",null,"Username"),(0,o._)("th",null,"Email"),(0,o._)("th",null,"Role"),(0,o._)("th",null,"QR Code"),(0,o._)("th",null,"Status"),(0,o._)("th",null,"Aksi")])],-1);const k={__name:"HalamanPengguna",setup:function(e){var n=(0,f.v0)(m.H),u=(0,d.ad)(m.H),k=(0,i.iH)([]),U=(0,i.iH)(""),g=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),_=(0,i.iH)(10),h=(0,i.iH)(null),S=(0,i.iH)(!1),W=(0,i.iH)(!1),b=(0,i.iH)({}),x=(0,o.Fl)((function(){return k.value.filter((function(e){return e.fullName.toLowerCase().includes(U.value.toLowerCase())})).slice(0,_.value)})),y=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(){var n,l,o,i,c,s=arguments;return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]&&s[0],l=n?(0,d.IO)((0,d.hJ)(u,"users"),(0,d.ar)("fullName",">=",U.value),(0,d.ar)("fullName","<=",U.value+""),(0,d.b9)(_.value)):(0,d.IO)((0,d.hJ)(u,"users"),(0,d.ar)("fullName",">=",U.value),(0,d.ar)("fullName","<=",U.value+""),(0,d.TQ)(h.value),(0,d.b9)(_.value)),e.prev=2,e.next=5,(0,d.PL)(l);case 5:o=e.sent,i=o.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})),n?k.value=i:(c=k.value).push.apply(c,(0,a.Z)(i)),h.value=o.docs[o.docs.length-1],S.value=o.docs.length===_.value,console.log("Data pengguna berhasil diambil:",k.value),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](2),console.error("Error fetching user data:",e.t0),Z("Terjadi kesalahan saat mengambil data pengguna","danger");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),C=function(){y(!0)},N=function(){y()},V=function(e){setTimeout((function(){y(!0),e.target.complete()}),2e3)},Z=function(e,n){g.value={isOpen:!0,message:e,duration:2e3,color:n}},j=function(){var e=k.value.map((function(e){return{fullName:e.fullName,username:e.username,email:e.email,role:e.role,qrCode:e.qrCode,status:e.status}})),n=p.P6.json_to_sheet(e),u=p.P6.book_new();p.P6.book_append_sheet(u,n,"Pengguna"),p.NC(u,"daftar_pengguna.xlsx"),Z("Data pengguna berhasil diekspor","success")},E=function(e){b.value=(0,r.Z)({},e),W.value=!0},H=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.r7)((0,d.JU)(u,"users",b.value.id),b.value);case 3:Z("Data pengguna berhasil diperbarui","success"),y(!0),P(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error updating user data:",e.t0),Z("Terjadi kesalahan saat memperbarui data pengguna","danger");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,l.Z)((0,t.Z)().mark((function e(n){var a;return(0,t.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a="aktif"===n.status?"nonaktif":"aktif",e.next=4,(0,d.r7)((0,d.JU)(u,"users",n.id),{status:a});case 4:Z("Status pengguna berhasil diubah menjadi ".concat(a),"success"),y(!0),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error updating user status:",e.t0),Z("Terjadi kesalahan saat mengubah status pengguna","danger");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),P=function(){W.value=!1,b.value={}};return(0,o.bv)((function(){(0,f.Aj)(n,(function(e){e?y(!0):(console.error("User not authenticated"),Z("Pengguna tidak terautentikasi","danger"))}))})),function(e,n){return(0,o.wg)(),(0,o.j4)((0,i.SU)(s._i),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Gu),{mode:"ios"},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.sr),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.wd),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Pengguna")]})),_:1}),(0,o.Wm)((0,i.SU)(s.oU),{slot:"start","default-href":"/"})]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(s.W2),{fullscreen:!0},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.nJ),{slot:"fixed",onIonRefresh:n[0]||(n[0]=function(e){return V(e)})},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Wo))]})),_:1}),(0,o.Wm)((0,i.SU)(s.W2),{class:"ion-padding"},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Ie),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Cari Pengguna")]})),_:1}),(0,o.Wm)((0,i.SU)(s.pK),{modelValue:U.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return U.value=e}),placeholder:"Masukkan nama pengguna"},null,8,["modelValue"])]})),_:1}),(0,o.Wm)((0,i.SU)(s.YG),{expand:"block",onClick:C},{default:(0,o.w5)((function(){return[(0,o.Uk)("Cari")]})),_:1}),(0,o.Wm)((0,i.SU)(s.jY),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Nd),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.wI),null,{default:(0,o.w5)((function(){return[v,(0,o.Wm)((0,i.SU)(s.q_),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Ie),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o._)("table",null,[w,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.value,(function(e){return(0,o.wg)(),(0,o.iD)("tr",{key:e.id},[(0,o._)("td",null,(0,c.zw)(e.fullName),1),(0,o._)("td",null,(0,c.zw)(e.username),1),(0,o._)("td",null,(0,c.zw)(e.email),1),(0,o._)("td",null,(0,c.zw)(e.role),1),(0,o._)("td",null,(0,c.zw)(e.qrCode),1),(0,o._)("td",null,(0,c.zw)(e.status),1),(0,o._)("td",null,[(0,o.Wm)((0,i.SU)(s.YG),{onClick:function(n){return E(e)}},{default:(0,o.w5)((function(){return[(0,o.Uk)("Edit")]})),_:2},1032,["onClick"]),(0,o.Wm)((0,i.SU)(s.YG),{onClick:function(n){return I(e)},color:"aktif"===e.status?"danger":"success"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,c.zw)("aktif"===e.status?"Nonaktifkan":"Aktifkan"),1)]})),_:2},1032,["onClick","color"])])])})),128))])])]})),_:1})]})),_:1})]})),_:1}),S.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(s.YG),{key:0,expand:"block",onClick:N},{default:(0,o.w5)((function(){return[(0,o.Uk)("Load More")]})),_:1})):(0,o.kq)("",!0)]})),_:1})]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(s.YG),{expand:"block",onClick:j},{default:(0,o.w5)((function(){return[(0,o.Uk)("Export ke Excel")]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(s.Px),{"is-open":g.value.isOpen,message:g.value.message,duration:g.value.duration,color:g.value.color,onDidDismiss:n[2]||(n[2]=function(){return g.value.isOpen=!1})},null,8,["is-open","message","duration","color"]),(0,o.Wm)((0,i.SU)(s.ki),{"is-open":W.value,onDidDismiss:P},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Gu),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.sr),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.wd),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Edit Pengguna")]})),_:1}),(0,o.Wm)((0,i.SU)(s.Sm),{slot:"end"},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.YG),{onClick:P},{default:(0,o.w5)((function(){return[(0,o.Uk)("Close")]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(s.W2),null,{default:(0,o.w5)((function(){return[b.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(s.Ie),{key:0},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Nama Lengkap")]})),_:1}),(0,o.Wm)((0,i.SU)(s.pK),{modelValue:b.value.fullName,"onUpdate:modelValue":n[3]||(n[3]=function(e){return b.value.fullName=e})},null,8,["modelValue"])]})),_:1})):(0,o.kq)("",!0),b.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(s.Ie),{key:1},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Username")]})),_:1}),(0,o.Wm)((0,i.SU)(s.pK),{modelValue:b.value.username,"onUpdate:modelValue":n[4]||(n[4]=function(e){return b.value.username=e})},null,8,["modelValue"])]})),_:1})):(0,o.kq)("",!0),b.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(s.Ie),{key:2},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Email")]})),_:1}),(0,o.Wm)((0,i.SU)(s.pK),{modelValue:b.value.email,"onUpdate:modelValue":n[5]||(n[5]=function(e){return b.value.email=e})},null,8,["modelValue"])]})),_:1})):(0,o.kq)("",!0),b.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(s.Ie),{key:3},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.Q$),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Role")]})),_:1}),(0,o.Wm)((0,i.SU)(s.t9),{modelValue:b.value.role,"onUpdate:modelValue":n[6]||(n[6]=function(e){return b.value.role=e})},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(s.n0),{value:"admin"},{default:(0,o.w5)((function(){return[(0,o.Uk)("Admin")]})),_:1}),(0,o.Wm)((0,i.SU)(s.n0),{value:"siswa"},{default:(0,o.w5)((function(){return[(0,o.Uk)("Siswa")]})),_:1}),(0,o.Wm)((0,i.SU)(s.n0),{value:"guru"},{default:(0,o.w5)((function(){return[(0,o.Uk)("Guru")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)((0,i.SU)(s.YG),{expand:"block",onClick:H},{default:(0,o.w5)((function(){return[(0,o.Uk)("Simpan")]})),_:1})]})),_:1})]})),_:1},8,["is-open"])]})),_:1})]})),_:1})}}},U=k,g=U},9584:(e,n,u)=>{u.d(n,{Z:()=>i});u(9753);var t=u(9227);function a(e){if(Array.isArray(e))return(0,t.Z)(e)}u(2526),u(1817),u(1539),u(2165),u(8783),u(3948),u(1038);function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var l=u(2780);u(1703),u(6647);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return a(e)||r(e)||(0,l.Z)(e)||o()}}}]);
//# sourceMappingURL=574.47bbbfd1.js.map