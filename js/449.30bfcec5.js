"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[449],{1285:(e,n,t)=>{var u=t(7908),a=t(1400),r=t(6244);e.exports=function(e){var n=u(this),t=r(n),l=arguments.length,i=a(l>1?arguments[1]:void 0,t),o=l>2?arguments[2]:void 0,s=void 0===o?t:a(o,t);while(s>i)n[i++]=e;return n}},4964:(e,n,t)=>{var u=t(5112),a=u("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[a]=!1,"/./"[e](n)}catch(u){}}return!1}},7850:(e,n,t)=>{var u=t(111),a=t(4326),r=t(5112),l=r("match");e.exports=function(e){var n;return u(e)&&(void 0!==(n=e[l])?!!n:"RegExp"===a(e))}},3929:(e,n,t)=>{var u=t(7850),a=TypeError;e.exports=function(e){if(u(e))throw a("The method doesn't accept regular expressions");return e}},3290:(e,n,t)=>{var u=t(2109),a=t(1285),r=t(1223);u({target:"Array",proto:!0},{fill:a}),r("fill")},6699:(e,n,t)=>{var u=t(2109),a=t(1318).includes,r=t(7293),l=t(1223),i=r((function(){return!Array(1).includes()}));u({target:"Array",proto:!0,forced:i},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l("includes")},2023:(e,n,t)=>{var u=t(2109),a=t(1702),r=t(3929),l=t(4488),i=t(1340),o=t(4964),s=a("".indexOf);u({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~s(i(l(this)),i(r(e)),arguments.length>1?arguments[1]:void 0)}})},4449:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var u=t(124),a=t(5082),r=t(8534),l=(t(7327),t(1539),t(1249),t(6699),t(2023),t(3290),t(2564),t(2222),t(3112),t(6647),t(3710),t(9714),t(9554),t(4747),t(7658),t(6252)),i=t(2262),o=t(3577),s=t(9963),c=t(286),f=t(6100),d=t(2201),v=t(316),m=t(5856),w={key:0},U={key:0},p={key:1},h={key:1};const S={__name:"HalamanUjian",setup:function(e){var n=(0,f.ad)(m.H),t=(0,v.v0)(m.H),S=(0,d.yj)(),W=(0,d.tv)(),k=(0,i.iH)(S.params.jadwalId),_=(0,i.iH)([]),g=(0,i.iH)(0),x=(0,i.iH)([]),b=(0,i.iH)(0),y=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),I=(0,i.iH)(0),H=(0,i.iH)(null),j=(0,i.iH)(!1),A=function(){var e=(0,r.Z)((0,u.Z)().mark((function e(){var r,l,i,o,s;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.currentUser,!r){e.next=21;break}return e.next=4,(0,f.QT)((0,f.JU)(n,"examResults/".concat(r.uid,"/results"),k.value));case 4:if(l=e.sent,!l.exists()){e.next=9;break}return j.value=!0,b.value=l.data().score,e.abrupt("return");case 9:return e.next=11,(0,f.QT)((0,f.JU)(n,"jadwal",k.value));case 11:if(i=e.sent,!i.exists()){e.next=21;break}return o=i.data(),e.next=16,(0,f.PL)((0,f.hJ)(n,"soal"));case 16:s=e.sent,_.value=s.docs.map((function(e){return(0,a.Z)({id:e.id},e.data())})).filter((function(e){return o.soal.includes(e.id)})),x.value=new Array(_.value.length).fill(""),I.value=60*o.durasi,Q();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){H.value=setInterval((function(){I.value>0?I.value--:(clearInterval(H.value),D())}),1e3)},z=function(e){var n=Math.floor(e/60),t=e%60;return"".concat(n.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},$=function(){g.value<_.value.length-1||B(),g.value++},B=function(){b.value=0,_.value.forEach((function(e,n){e.correctAnswer===x.value[n]&&b.value++}))},D=function(){var e=(0,r.Z)((0,u.Z)().mark((function e(){var a;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.currentUser,!a){e.next=17;break}return B(),e.prev=3,e.next=6,(0,f.pl)((0,f.JU)(n,"examResults/".concat(a.uid,"/results"),k.value),{userId:a.uid,jadwalId:k.value,score:b.value,createdAt:(0,f.Bt)()});case 6:E("Ujian berhasil disubmit!","success"),j.value=!0,W.push({name:"siswa"}),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),console.error("Error submitting exam:",e.t0),E("Gagal submit ujian.","danger");case 15:e.next=18;break;case 17:E("Pengguna tidak terautentikasi.","danger");case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(e){W.push({name:e})},E=function(e,n){y.value={isOpen:!0,message:e,duration:2e3,color:n}};return(0,l.bv)((function(){A()})),(0,l.Ah)((function(){H.value&&clearInterval(H.value)})),function(e,n){return(0,l.wg)(),(0,l.j4)((0,i.SU)(c._i),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Gu),{mode:"ios"},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.sr),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.wd),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Ujian")]})),_:1}),(0,l.Wm)((0,i.SU)(c.oU),{slot:"start","default-href":"/"})]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.W2),{fullscreen:!0},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.W2),{class:"ion-padding"},{default:(0,l.w5)((function(){return[j.value?((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Anda sudah menyelesaikan ujian ini. Nilai Anda: "+(0,o.zw)(b.value),1)]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.YG),{onClick:n[1]||(n[1]=(0,s.iM)((function(e){return C("lihathasilujianUser")}),["prevent"]))},{default:(0,l.w5)((function(){return[(0,l.Uk)("Lihat Hasil Ujian")]})),_:1})])):((0,l.wg)(),(0,l.iD)("div",w,[(0,l._)("div",null,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Waktu Tersisa: "+(0,o.zw)(z(I.value)),1)]})),_:1})]})),_:1})]),g.value<_.value.length?((0,l.wg)(),(0,l.iD)("div",U,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].question),1)]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.se),{modelValue:x.value[g.value],"onUpdate:modelValue":n[0]||(n[0]=function(e){return x.value[g.value]=e})},{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].options.A),1)]})),_:1}),(0,l.Wm)((0,i.SU)(c.B7),{slot:"start",value:"A"})]})),_:1}),(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].options.B),1)]})),_:1}),(0,l.Wm)((0,i.SU)(c.B7),{slot:"start",value:"B"})]})),_:1}),(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].options.C),1)]})),_:1}),(0,l.Wm)((0,i.SU)(c.B7),{slot:"start",value:"C"})]})),_:1}),(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].options.D),1)]})),_:1}),(0,l.Wm)((0,i.SU)(c.B7),{slot:"start",value:"D"})]})),_:1}),(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(_.value[g.value].options.E),1)]})),_:1}),(0,l.Wm)((0,i.SU)(c.B7),{slot:"start",value:"E"})]})),_:1})]})),_:1},8,["modelValue"]),(0,l.Wm)((0,i.SU)(c.YG),{onClick:$},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,o.zw)(g.value===_.value.length-1?"Finish":"Next"),1)]})),_:1})])):((0,l.wg)(),(0,l.iD)("div",p,[(0,l.Wm)((0,i.SU)(c.Ie),null,{default:(0,l.w5)((function(){return[(0,l.Wm)((0,i.SU)(c.Q$),null,{default:(0,l.w5)((function(){return[(0,l.Uk)("Nilai Anda: "+(0,o.zw)(b.value),1)]})),_:1})]})),_:1}),(0,l.Wm)((0,i.SU)(c.YG),{onClick:D},{default:(0,l.w5)((function(){return[(0,l.Uk)("Submit Exam")]})),_:1})]))]))]})),_:1}),(0,l.Wm)((0,i.SU)(c.Px),{"is-open":y.value.isOpen,message:y.value.message,duration:y.value.duration,color:y.value.color,onDidDismiss:n[2]||(n[2]=function(){return y.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},W=S,k=W}}]);
//# sourceMappingURL=449.30bfcec5.js.map