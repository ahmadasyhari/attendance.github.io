{"version":3,"file":"js/89.7dd77934.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/guru/LihatNilai.vue","webpack://resep-bunda/./src/views/guru/LihatNilai.vue?29ad"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Hasil Ujian Siswa</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-content class=\"ion-padding\">\n        <ion-item>\n          <ion-label>Kelas</ion-label>\n          <ion-select v-model=\"selectedClass\" placeholder=\"Pilih Kelas\">\n            <ion-select-option\n              v-for=\"kelas in classes\"\n              :key=\"kelas\"\n              :value=\"kelas\"\n            >\n              {{ kelas }}\n            </ion-select-option>\n          </ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-label>Mata Pelajaran</ion-label>\n          <ion-select\n            v-model=\"selectedSubject\"\n            placeholder=\"Pilih Mata Pelajaran\"\n          >\n            <ion-select-option\n              v-for=\"subject in subjects\"\n              :key=\"subject\"\n              :value=\"subject\"\n            >\n              {{ subject }}\n            </ion-select-option>\n          </ion-select>\n        </ion-item>\n        <ion-button expand=\"block\" @click=\"filterResults\">Filter</ion-button>\n        <ion-grid>\n          <ion-row>\n            <ion-col>\n              <h2>Daftar Hasil Ujian</h2>\n              <ion-list>\n                <ion-item>\n                  <ion-label>\n                    <table>\n                      <thead>\n                        <tr>\n                          <th>Nama Siswa</th>\n                          <th>Mata Pelajaran</th>\n                          <th>Nilai</th>\n                          <th>Tanggal</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr v-for=\"result in filteredResults\" :key=\"result.id\">\n                          <td>{{ result.studentName }}</td>\n                          <td>{{ result.mataPelajaran }}</td>\n                          <td>{{ result.score }}</td>\n                          <td>{{ formatDate(result.createdAt) }}</td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </ion-label>\n                </ion-item>\n              </ion-list>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-content>\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonItem,\n  IonLabel,\n  IonSelect,\n  IonSelectOption,\n  IonButton,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonList,\n  IonToast,\n} from \"@ionic/vue\";\nimport { ref, onMounted } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  getDocs,\n  doc,\n  getDoc,\n} from \"firebase/firestore\";\nimport { firebaseApp } from \"../firebase.js\";\n\nconst db = getFirestore(firebaseApp);\n\nconst classes = [\"X\", \"XI\", \"XII\"];\nconst subjects = [\n  \"Matematika\",\n  \"Bahasa Indonesia\",\n  \"Bahasa Inggris\",\n  \"IPA\",\n  \"IPS\",\n];\n\nconst selectedClass = ref(\"\");\nconst selectedSubject = ref(\"\");\nconst examResults = ref([]);\nconst filteredResults = ref([]);\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\n\nconst fetchExamResults = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"examResults\"));\n    const results = await Promise.all(\n      querySnapshot.docs.map(async (examDoc) => {\n        const data = examDoc.data();\n        const userDocRef = doc(db, \"users\", data.userId);\n        const studentDoc = await getDoc(userDocRef);\n        const jadwalDoc = await getDoc(doc(db, \"jadwal\", data.jadwalId));\n\n        return {\n          id: examDoc.id,\n          ...data,\n          studentName: studentDoc.exists() ? studentDoc.data().fullName : \"N/A\",\n          kelas: studentDoc.exists() ? studentDoc.data().kelas : \"N/A\",\n          mataPelajaran: jadwalDoc.exists()\n            ? jadwalDoc.data().mataPelajaran\n            : \"N/A\",\n        };\n      })\n    );\n    examResults.value = results;\n  } catch (error) {\n    console.error(\"Error fetching exam results:\", error);\n    showToast(\"Terjadi kesalahan saat mengambil data hasil ujian.\", \"danger\");\n  }\n};\n\nconst filterResults = () => {\n  if (!selectedClass.value || !selectedSubject.value) {\n    showToast(\"Pilih kelas dan mata pelajaran.\", \"warning\");\n    return;\n  }\n  filteredResults.value = examResults.value.filter(\n    (result) =>\n      result.kelas === selectedClass.value &&\n      result.mataPelajaran === selectedSubject.value\n  );\n};\n\nconst formatDate = (timestamp) => {\n  if (!timestamp) return \"N/A\";\n  const date = new Date(timestamp.seconds * 1000);\n  return date.toLocaleDateString(\"id-ID\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n};\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n\nonMounted(() => {\n  fetchExamResults();\n});\n</script>\n<style scoped>\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\nth,\ntd {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\nth {\n  background-color: #f2f2f2;\n  font-weight: bold;\n}\n\ntbody tr:nth-child(even) {\n  background-color: #f9f9f9;\n}\n\ntbody tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n","import script from \"./LihatNilai.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LihatNilai.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LihatNilai.vue?vue&type=style&index=0&id=aef96c60&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-aef96c60\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","classes","subjects","selectedClass","ref","selectedSubject","examResults","filteredResults","toast","isOpen","message","duration","color","fetchExamResults","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","querySnapshot","results","wrap","_context2","prev","next","getDocs","collection","sent","Promise","all","docs","map","_ref2","_callee","examDoc","data","userDocRef","studentDoc","jadwalDoc","_context","doc","userId","getDoc","jadwalId","abrupt","_objectSpread","id","studentName","exists","fullName","kelas","mataPelajaran","stop","_x","apply","arguments","value","t0","console","error","showToast","filterResults","filter","result","formatDate","timestamp","date","Date","seconds","toLocaleDateString","year","month","day","onMounted","__exports__"],"sourceRoot":""}