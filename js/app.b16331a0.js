(()=>{var e={1993:e=>{function n(e){return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=()=>[],n.resolve=n,n.id=1993,e.exports=n},2840:(e,n,t)=>{"use strict";t.d(n,{Z:()=>p});var r=t(124),a=t(8534),u=t(4720),s=t(5137);function o(e,n){return i.apply(this,arguments)}function i(){return i=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Cl.create({cssClass:"my-custom-class",mode:"ios",header:n,message:t,buttons:["OK"]});case 2:return a=e.sent,e.next=5,a.present();case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}function l(e,n){return c.apply(this,arguments)}function c(){return c=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Mn.create({message:n,duration:2e3,color:t,position:"top"});case 2:a=e.sent,a.present();case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Cl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Confirm to Exit App??</strong>",mode:"ios",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:function(){console.log("Confirm Cancel")}},{text:"Confirm",id:"confirm-button",handler:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.g.exitApp();case 1:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}]});case 2:n=e.sent,n.present();case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}const p={alertV:o,toastV:l,confirmExit:d}},2274:(e,n,t)=>{"use strict";t.d(n,{w8:()=>r});t(3710),t(6647),t(1539),t(9714),t(7658),t(3112),t(3843);function r(e){var n=new Date(e),t=new Array("Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"),r=String(n.getDate()).padStart(2,"0"),a=n.getFullYear(),u=t[n.getMonth()];return r+" "+u+" "+a}},3546:(e,n,t)=>{"use strict";t(6992),t(8674),t(9601),t(7727);var r=t(9963),a=t(6252),u=t(2262),s=t(4720);const o={__name:"App",setup:function(e){return function(e,n){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s.dr),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.jP))]})),_:1})}}},i=o,l=i;t(1539),t(8783),t(3948);var c=t(1089),d=t(124),f=t(8534),p=(t(7658),t(8903)),m=t(2201),v=t(316);const k={__name:"TabsPage",setup:function(e){var n=(0,v.v0)(),t=(0,m.tv)(),o=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.Cl.create({cssClass:"my-custom-class",header:"Confirm!",mode:"ios",message:"Confirm Logout?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Logout",handler:function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.w7)(n);case 3:console.log("Logged out successfully"),localStorage.clear(),t.push({name:"login"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Logout error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));function r(){return e.apply(this,arguments)}return r}()}]});case 2:return r=e.sent,e.next=5,r.present();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,n){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s._i),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.UN),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.jP)),(0,a.Wm)((0,u.SU)(s.yq),{slot:"bottom",id:"app-tab-bar"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.ZU),{tab:"home",href:"/page/home"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.gu),{icon:(0,u.SU)(p.GIQ)},null,8,["icon"]),(0,a.Wm)((0,u.SU)(s.Q$),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Menu")]})),_:1})]})),_:1}),(0,a.Wm)((0,u.SU)(s.ZU),{tab:"logout",onClick:n[0]||(n[0]=(0,r.iM)((function(e){return o()}),["prevent"]))},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.gu),{icon:(0,u.SU)(p.JFt)},null,8,["icon"]),(0,a.Wm)((0,u.SU)(s.Q$),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Logout")]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}}};var g=t(3744);const w=(0,g.Z)(k,[["__scopeId","data-v-bc5feeb4"]]),h=w;var b=t(2038),_=(t(8309),t(2564),t(3577)),x=t(6100),U=t(2840),S=(0,a._)("div",{class:"header-register"},[(0,a._)("div",{class:"logo ion-padding"},[(0,a._)("h1",null,"Absen Ku")])],-1),y=(0,a._)("div",{class:"top-radius"},null,-1),W={class:"content-register",style:{padding:"20px"}},Z=(0,a._)("h1",{style:{margin:"0","margin-bottom":"5px"}},"Selamat Datang!",-1),D=(0,a._)("p",{style:{margin:"0"}},"Silakan daftar akun baru",-1),A={class:"input-group"},I=(0,a._)("div",{class:"label"},[(0,a._)("h2",null,"Nama Lengkap"),(0,a._)("span",null,"*")],-1),C={class:"input ion-activatable ripple-parent"},M=(0,a._)("div",{class:"label"},[(0,a._)("h2",null,"Username"),(0,a._)("span",null,"*")],-1),z={class:"input ion-activatable ripple-parent"},H=(0,a._)("div",{class:"label"},[(0,a._)("h2",null,"Password"),(0,a._)("span",null,"*")],-1),E={class:"input ion-activatable ripple-parent"},O=(0,a._)("div",{class:"label"},[(0,a._)("h2",null,"Role"),(0,a._)("span",null,"*")],-1),P={class:"input ion-activatable ripple-parent"},j={key:0,class:"ion-text-center",style:{margin:"0",color:"var(--ion-color-danger)"}},N=(0,a._)("span",{style:{"font-size":"1.5rem"}}," Daftar",-1),L=(0,a._)("span",{style:{"font-size":"1.2rem"}}," Kembali ke Login",-1);const T={__name:"RegisterPage",setup:function(e){var n=(0,u.iH)(!1),t=(0,u.iH)(""),o=(0,u.iH)(""),i=(0,u.iH)(""),l=(0,u.iH)("password"),c=(0,u.iH)(""),k=(0,u.iH)(""),g=(0,u.iH)(!1),w=(0,m.tv)(),h=(0,v.v0)(),b=(0,x.ad)();(0,s.Kx)(-1,(function(){"login"==w.currentRoute.value.name&&U.Z.confirmExit()}));var T=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(g.value=!1,t.value){e.next=6;break}g.value=!0,k.value="Nama lengkap tidak boleh kosong",e.next=42;break;case 6:if(o.value){e.next=11;break}g.value=!0,k.value="Username tidak boleh kosong",e.next=42;break;case 11:if(i.value){e.next=16;break}g.value=!0,k.value="Password tidak boleh kosong",e.next=42;break;case 16:if(c.value){e.next=21;break}g.value=!0,k.value="Role tidak boleh kosong",e.next=42;break;case 21:return n.value=!0,e.prev=22,e.next=25,(0,v.Xb)(h,o.value,i.value);case 25:return r=e.sent,a=r.user,e.next=29,(0,v.ck)(a,{displayName:t.value});case 29:return e.next=31,(0,x.pl)((0,x.JU)(b,"users",a.uid),{fullName:t.value,username:o.value,email:a.email,role:c.value,status:"non-aktif"});case 31:n.value=!1,g.value=!1,w.push({name:"splash"}),setTimeout((function(){t.value="",o.value="",i.value="",c.value=""}),1e3),e.next=42;break;case 37:e.prev=37,e.t0=e["catch"](22),n.value=!1,g.value=!0,k.value=e.t0.message;case 42:case"end":return e.stop()}}),e,null,[[22,37]])})));return function(){return e.apply(this,arguments)}}(),R=function(e){l.value=e};return function(e,d){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s._i),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.W2),{class:"register","scroll-y":"true"},{default:(0,a.w5)((function(){return[S,y,(0,a._)("div",W,[Z,D,(0,a._)("div",A,[I,(0,a._)("div",C,[(0,a.Wm)((0,u.SU)(s.gu),{class:"start",icon:(0,u.SU)(p.lBs),color:"primary"},null,8,["icon"]),(0,a.Wm)((0,u.SU)(s.pK),{class:"fullName",type:"text",placeholder:"Contoh: John Doe",modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=function(e){return t.value=e})},null,8,["modelValue"]),(0,a.Wm)((0,u.SU)(s.H$),{mode:"ios"})]),M,(0,a._)("div",z,[(0,a.Wm)((0,u.SU)(s.gu),{class:"start",icon:(0,u.SU)(p.X5o),color:"primary"},null,8,["icon"]),(0,a.Wm)((0,u.SU)(s.pK),{class:"username",type:"text",placeholder:"Contoh: user.name1",modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=function(e){return o.value=e})},null,8,["modelValue"]),(0,a.Wm)((0,u.SU)(s.H$),{mode:"ios"})]),H,(0,a._)("div",E,[(0,a.Wm)((0,u.SU)(s.gu),{class:"start",icon:(0,u.SU)(p.Ml6),color:"primary"},null,8,["icon"]),(0,a.Wm)((0,u.SU)(s.pK),{class:"password",onKeyup:(0,r.D2)(T,["enter"]),type:l.value,placeholder:"Contoh: password123*",modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=function(e){return i.value=e})},null,8,["onKeyup","type","modelValue"]),(0,a.Wm)((0,u.SU)(s.H$),{mode:"ios"}),"password"==l.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(s.gu),{key:0,class:"end",color:"primary",icon:(0,u.SU)(p.hII),onClick:d[3]||(d[3]=(0,r.iM)((function(e){return R("text")}),["prevent"]))},null,8,["icon"])):((0,a.wg)(),(0,a.j4)((0,u.SU)(s.gu),{key:1,class:"end",color:"primary",icon:(0,u.SU)(p.qRO),onClick:d[4]||(d[4]=(0,r.iM)((function(e){return R("password")}),["prevent"]))},null,8,["icon"]))]),O,(0,a._)("div",P,[(0,a.Wm)((0,u.SU)(s.t9),{modelValue:c.value,"onUpdate:modelValue":d[5]||(d[5]=function(e){return c.value=e}),placeholder:"Pilih Role"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.n0),{value:"guru"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Guru")]})),_:1}),(0,a.Wm)((0,u.SU)(s.n0),{value:"siswa"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Siswa")]})),_:1}),(0,a.Wm)((0,u.SU)(s.n0),{value:"admin"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Admin")]})),_:1})]})),_:1},8,["modelValue"])])]),g.value?((0,a.wg)(),(0,a.iD)("h5",j,(0,_.zw)(k.value),1)):(0,a.kq)("",!0),(0,a.Wm)((0,u.SU)(s.YG),{mode:"ios",class:"register",onClick:(0,r.iM)(T,["prevent"]),expand:"block"},{default:(0,a.w5)((function(){return[N]})),_:1},8,["onClick"]),(0,a.Wm)((0,u.SU)(s.YG),{mode:"ios",class:"back-to-login",onClick:d[6]||(d[6]=function(n){return e.$router.push({name:"login"})}),expand:"block"},{default:(0,a.w5)((function(){return[L]})),_:1})]),(0,a.Wm)((0,u.SU)(s.wh),{mode:"ios","is-open":n.value,message:"Mohon tunggu...",spinner:"crescent"},null,8,["is-open"])]})),_:1})]})),_:1})}}},R=T,K=R;var Q=t(6347),J=t(3144),Y=(t(1249),t(7042),t(2222),t(4678),t(3710),t(5856)),B=t(4105),G=(0,a._)("h1",null,"Menu",-1),V=(0,a._)("p",{style:{color:"#fff"}},"Ajukan Izin",-1),F=(0,a._)("p",{style:{color:"#fff"}},"Lap Kehadiran",-1),q=(0,a._)("p",{style:{color:"#fff"}},"Pengguna",-1),$=(0,a._)("p",{style:{color:"#fff"}},"Setting",-1),X=(0,a._)("h1",null,"Data Pengguna",-1),ee=(0,a._)("h1",null,"Input Titik Koordinat",-1),ne=(0,a._)("h1",null,"Laporan Absensi",-1),te=10,re=10;const ae={__name:"AdminPage",setup:function(e){var n=(0,x.ad)(Y.H),t=(0,u.iH)([]),o=(0,u.iH)([]),i=(0,u.iH)(""),l=(0,u.iH)(""),c=(0,u.iH)(!1),m=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),v=(0,u.iH)(1),k=(0,u.iH)(1),g=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var r;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.PL)((0,x.hJ)(n,"users"));case 3:r=e.sent,t.value=r.docs.map((function(e){return(0,J.Z)({id:e.id},e.data())})),console.log("Users fetched:",t.value),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error fetching users:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=(0,a.Fl)((function(){return t.value.slice(0,v.value*te)})),h=(0,a.Fl)((function(){return v.value*te<t.value.length})),b=function(){v.value++},U=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var t,r;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.QT)((0,x.JU)(n,"settings","coordinates"));case 3:t=e.sent,t.exists()&&(r=t.data(),i.value=r.latitude,l.value=r.longitude,console.log("Coordinates fetched:",r)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var t,r,a,u,s,i;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.PL)((0,x.hJ)(n,"users"));case 3:t=e.sent,r=t.docs.map((function(e){return(0,J.Z)({id:e.id},e.data())})),a=[],u=(0,Q.Z)(r),e.prev=7,i=(0,d.Z)().mark((function e(){var t,r,u;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.value,r=(0,x.hJ)(n,"attendance",t.id,"records"),e.next=4,(0,x.PL)((0,x.IO)(r,(0,x.Xo)("masuk","desc")));case 4:u=e.sent,a=a.concat(u.docs.map((function(e){var n=e.data();return{id:e.id,userId:t.id,fullName:t.fullName,date:e.id,masuk:n.masuk?n.masuk.toDate().toLocaleString():"Belum absen",keluar:n.keluar?n.keluar.toDate().toLocaleString():"Belum absen",lateTime:M(n.masuk?n.masuk.toDate():null)}})));case 6:case"end":return e.stop()}}),e)})),u.s();case 10:if((s=u.n()).done){e.next=14;break}return e.delegateYield(i(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e["catch"](7),u.e(e.t1);case 19:return e.prev=19,u.f(),e.finish(19);case 22:o.value=a,console.log("Attendance records fetched:",o.value),e.next=29;break;case 26:e.prev=26,e.t2=e["catch"](0),console.error("Error fetching attendance records:",e.t2);case 29:case"end":return e.stop()}}),e,null,[[0,26],[7,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),y=(0,a.Fl)((function(){return o.value.slice(0,k.value*re)})),W=(0,a.Fl)((function(){return k.value*re<o.value.length})),Z=function(){k.value++},D=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(t){var r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,x.JU)(n,"users",t.id),a="non-aktif"===t.status?"aktif":"non-aktif",e.next=5,(0,x.r7)(r,{status:a});case 5:t.status=a,E("Status pengguna berhasil diubah.","success"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error updating user status:",e.t0),E("Terjadi kesalahan saat mengubah status pengguna.","danger");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.pl)((0,x.JU)(n,"settings","coordinates"),{latitude:parseFloat(i.value),longitude:parseFloat(l.value)});case 3:console.log("Coordinates saved"),c.value=!1,E("Koordinat berhasil disimpan.","success"),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error saving coordinates:",e.t0),E("Terjadi kesalahan saat menyimpan koordinat.","danger");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),I=function(){c.value=!0},C=function(e){if(!e)return!1;var n=new Date(e),t=new Date(n);return t.setHours(8,0,0,0),n>t},M=function(e){if(!e)return"";var n=new Date(e),t=new Date(n);if(t.setHours(8,0,0,0),n>t){var r=Math.floor((n-t)/6e4),a=Math.floor(r/60),u=r%60;return"".concat(a," jam ").concat(u," menit")}return"Tepat Waktu"},z=function(){var e=B.P6.json_to_sheet(t.value),n=B.P6.book_new();B.P6.book_append_sheet(n,e,"Data Pengguna"),B.NC(n,"data_pengguna.xlsx")},H=function(){var e=B.P6.json_to_sheet(o.value),n=B.P6.book_new();B.P6.book_append_sheet(n,e,"Laporan Absensi"),B.NC(n,"laporan_absensi.xlsx")},E=function(e,n){m.value={isOpen:!0,message:e,duration:2e3,color:n}};return(0,a.bv)((function(){g(),U(),S()})),function(e,n){var t=(0,a.up)("ion-icon");return(0,a.wg)(),(0,a.j4)((0,u.SU)(s._i),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Gu),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.sr),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wd),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Admin Page")]})),_:1})]})),_:1})]})),_:1}),(0,a.Wm)((0,u.SU)(s.W2),{class:"ion-padding"},{default:(0,a.w5)((function(){return[G,(0,a.Wm)((0,u.SU)(s.jY),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[0]||(n[0]=(0,r.iM)((function(n){return e.toNavigate("a")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(t,{icon:(0,u.SU)(p.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),V])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[1]||(n[1]=(0,r.iM)((function(n){return e.toNavigate("b")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(t,{icon:(0,u.SU)(p.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),F])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[2]||(n[2]=(0,r.iM)((function(n){return e.toNavigate("c")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(t,{icon:(0,u.SU)(p.JZY),size:"large",style:{color:"#fff"}},null,8,["icon"]),q])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[3]||(n[3]=(0,r.iM)((function(n){return e.toNavigate("d")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(t,{icon:(0,u.SU)(p.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),$])]})),_:1})]})),_:1})]})),_:1}),X,(0,a.Wm)((0,u.SU)(s.jY),{class:"table"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),{class:"table-header"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Nama Lengkap")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Username")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Email")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Status")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Aksi")]})),_:1})]})),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.value,(function(e){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s.Nd),{key:e.id,class:"table-row"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.fullName),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.username),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.email),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.status),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.yp),{onClick:function(n){return D(e)},color:"non-aktif"===e.status?"success":"warning",style:{cursor:"pointer"}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)("non-aktif"===e.status?"Aktifkan":"Non-aktifkan"),1)]})),_:2},1032,["onClick","color"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),h.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(s.YG),{key:0,onClick:b,color:"primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Load More Users")]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)((0,u.SU)(s.YG),{onClick:z,color:"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Export Data Pengguna ke Excel")]})),_:1}),ee,(0,a.Wm)((0,u.SU)(s.Ie),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Q$),{position:"floating"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Latitude")]})),_:1}),(0,a.Wm)((0,u.SU)(s.pK),{modelValue:i.value,"onUpdate:modelValue":n[4]||(n[4]=function(e){return i.value=e}),type:"number",readonly:!c.value},null,8,["modelValue","readonly"])]})),_:1}),(0,a.Wm)((0,u.SU)(s.Ie),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Q$),{position:"floating"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Longitude")]})),_:1}),(0,a.Wm)((0,u.SU)(s.pK),{modelValue:l.value,"onUpdate:modelValue":n[5]||(n[5]=function(e){return l.value=e}),type:"number",readonly:!c.value},null,8,["modelValue","readonly"])]})),_:1}),(0,a.Wm)((0,u.SU)(s.yp),{onClick:n[6]||(n[6]=function(e){return c.value?A():I()}),color:"success",style:{cursor:"pointer"}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(c.value?"Simpan Koordinat":"Edit Koordinat"),1)]})),_:1}),ne,(0,a.Wm)((0,u.SU)(s.jY),{class:"table"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),{class:"table-header"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Nama Lengkap")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Tanggal")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Masuk")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Keluar")]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Keterangan Telat")]})),_:1})]})),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.value,(function(e){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s.Nd),{key:e.id,class:"table-row"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.fullName),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.date),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.yp),{color:C(e.masuk)?"danger":"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.masuk?e.masuk:"Belum absen"),1)]})),_:2},1032,["color"])]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.keluar?e.keluar:"Belum absen"),1)]})),_:2},1024),(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(M(e.masuk)),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),W.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(s.YG),{key:1,onClick:Z,color:"primary"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Load More Attendance Records")]})),_:1})):(0,a.kq)("",!0),(0,a.Wm)((0,u.SU)(s.YG),{onClick:H,color:"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Export Laporan Absensi ke Excel")]})),_:1}),(0,a.Wm)((0,u.SU)(s.Px),{"is-open":m.value.isOpen,message:m.value.message,duration:m.value.duration,color:m.value.color,onDidDismiss:n[7]||(n[7]=function(e){return m.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},ue=ae,se=ue;var oe=t(6084),ie=(t(8733),t(9826),t(2274)),le=t(6693),ce={class:"main_content_div"},de=(0,a._)("div",{class:"user_div"},[(0,a._)("h2")],-1),fe=(0,a._)("div",{class:"top-radius"},null,-1),pe={class:"content_div"},me={class:"card-heading ion-padding"},ve=(0,a._)("br",null,null,-1),ke={class:"absen-buttons"},ge=(0,a._)("br",null,null,-1),we=(0,a._)("p",{style:{color:"#fff"}},"Ajukan Izin",-1),he=(0,a._)("p",{style:{color:"#fff"}},"Lap Kehadiran",-1),be=(0,a._)("p",{style:{color:"#fff"}},"Pengguna",-1),_e=(0,a._)("p",{style:{color:"#fff"}},"Setting",-1),xe=(0,a._)("br",null,null,-1),Ue={key:0},Se={key:1};const ye={__name:"GuruPage",setup:function(e){var n=(0,m.tv)(),t=(0,u.iH)(""),o=(0,u.iH)(""),i=(0,u.iH)(!0),l=(0,u.iH)("Absen Masuk"),c=(0,u.iH)([]),k=(0,u.iH)([]),g=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),w=(0,u.iH)(null),h=(0,v.v0)(Y.H),b=(0,x.ad)(Y.H),U=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.QT)((0,x.JU)(b,"users",n));case 3:r=e.sent,r.exists()&&(a=r.data(),t.value=a.fullName,o.value=a.status),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.QT)((0,x.JU)(b,"settings","coordinates"));case 3:n=e.sent,n.exists()&&(w.value=n.data()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,x.hJ)(b,"attendance",n,"records"),r=(0,x.IO)(t,(0,x.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,x.PL)(r);case 5:a=e.sent,c.value=a.docs.map((function(e){return(0,J.Z)({date:e.id},e.data())})),W(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=new Date,n=e.getDay(),t=new Date(e);t.setDate(e.getDate()-n+(0===n?-6:1));var r=new Date(t);r.setDate(t.getDate()+6),k.value=[];for(var a=function(){var e=u.toISOString().split("T")[0],n=c.value.find((function(n){return n.date===e}));k.value.push(n||{date:e,masuk:null,keluar:null})},u=new Date(t);u<=e;u.setDate(u.getDate()+1))a()},Z=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(new Date).toISOString().split("T")[0],r=(0,x.JU)(b,"attendance",n,"records",t),e.prev=2,e.next=5,(0,x.QT)(r);case 5:a=e.sent,a.exists()?a.data().keluar?(i.value=!0,l.value="Absen Masuk"):(i.value=!1,l.value="Absen Keluar"):(i.value=!0,l.value="Absen Masuk"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error checking absen status:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n,t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.currentUser,!n){e.next=33;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(t=e.sent,t){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return r=(0,x.JU)(b,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,x.QT)(r);case 15:if(a=e.sent,!a.exists()||!a.data().masuk){e.next=19;break}return z("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,x.pl)(r,{masuk:(0,x.Bt)()},{merge:!0});case 21:console.log("Absen masuk berhasil"),z("Absen masuk berhasil","success"),i.value=!1,l.value="Absen Keluar",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting masuk time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n,t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.currentUser,!n){e.next=33;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(t=e.sent,t){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return r=(0,x.JU)(b,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,x.QT)(r);case 15:if(a=e.sent,a.exists()&&!a.data().keluar){e.next=19;break}return z("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,x.r7)(r,{keluar:(0,x.Bt)()});case 21:console.log("Absen keluar berhasil"),z("Absen keluar berhasil","success"),i.value=!0,l.value="Absen Masuk",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting keluar time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i.value){e.next=5;break}return e.next=3,D();case 3:e.next=7;break;case 5:return e.next=7,A();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.mR.checkPermission({force:!0});case 3:return e.next=5,le.mR.hideBackground();case 5:return e.next=7,le.mR.startScan();case 7:n=e.sent,n.hasContent&&M(n.content),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error("Error scanning QR code:",e.t0),z("Error scanning QR code","danger");case 15:return e.prev=15,le.mR.showBackground(),le.mR.stopScan(),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a,u,s,c,f,p;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=h.currentUser,!t){e.next=46;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(r=e.sent,r){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=n.split("|"),u=(0,oe.Z)(a,2),s=u[0],c=u[1],f=(0,x.JU)(b,"attendance",t.uid,"records",new Date(c).toISOString().split("T")[0]),e.prev=13,e.next=16,(0,x.QT)(f);case 16:if(p=e.sent,"masuk"!==s){e.next=28;break}if(!p.exists()||!p.data().masuk){e.next=21;break}return z("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 21:return e.next=23,(0,x.pl)(f,{masuk:new Date(c)},{merge:!0});case 23:z("Absen masuk berhasil","success"),i.value=!1,l.value="Absen Keluar",e.next=37;break;case 28:if("keluar"!==s){e.next=37;break}if(p.exists()&&!p.data().keluar){e.next=32;break}return z("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 32:return e.next=34,(0,x.r7)(f,{keluar:new Date(c)});case 34:z("Absen keluar berhasil","success"),i.value=!0,l.value="Absen Masuk";case 37:y(t.uid),e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](13),console.error("Error processing QR code:",e.t0),z("Error processing QR code","danger");case 44:e.next=47;break;case 46:z("User tidak terautentikasi","danger");case 47:case"end":return e.stop()}}),e,null,[[13,40]])})));return function(n){return e.apply(this,arguments)}}(),z=function(e,n){g.value={isOpen:!0,message:e,duration:2e3,color:n}},H=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var t=n.coords.latitude,r=n.coords.longitude,a=E(t,r,w.value.latitude,w.value.longitude),u=.1;e(a<=u)}),(function(n){console.error("Error getting geolocation:",n),e(!1)})):(console.error("Geolocation is not supported by this browser."),e(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,n,t,r){var a=function(e){return e*Math.PI/180},u=6371,s=a(t-e),o=a(r-n),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a(e))*Math.cos(a(t))*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),c=u*l;return c},O=function(e){if(!e)return!1;var n=e.toDate(),t=new Date(n);return t.setHours(8,0,0,0),n>t},P=function(e){if(!e)return"0 menit";var n=e.toDate(),t=new Date(n);t.setHours(8,0,0,0);var r=n-t,a=Math.floor(r/36e5),u=Math.floor(r%36e5/6e4);return"".concat(a," jam ").concat(u," menit")},j=function(e){var n=new Date(e),t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],r=t[n.getDay()],a=n.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return"".concat(r,", ").concat(a)};(0,a.bv)((function(){(0,v.Aj)(h,(function(e){e?(U(e.uid),S(),y(e.uid),Z(e.uid)):n.push({name:"login"})}))}));var N=function(e){console.log("Navigating to menu ".concat(e))};return function(e,n){var o=(0,a.up)("center"),c=(0,a.up)("ion-icon"),d=(0,a.up)("ion-badge");return(0,a.wg)(),(0,a.j4)((0,u.SU)(s._i),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.W2),{class:"home-page"},{default:(0,a.w5)((function(){return[(0,a._)("div",ce,[de,fe,(0,a._)("div",pe,[(0,a._)("div",me,[(0,a.Wm)((0,u.SU)(s.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)((0,u.SU)(ie.w8)(new Date)),1)]})),_:1})]})),_:1}),(0,a.Wm)((0,u.SU)(s.FN),null,{default:(0,a.w5)((function(){return[ve,(0,a.Wm)(o,null,{default:(0,a.w5)((function(){return[(0,a._)("h1",null,"Hallo Selamat datang, "+(0,_.zw)(t.value)+"!",1)]})),_:1}),(0,a._)("div",ke,[(0,a.Wm)((0,u.SU)(s.YG),{color:i.value?"primary":"danger",onClick:I},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(l.value),1)]})),_:1},8,["color"]),(0,a.Wm)((0,u.SU)(s.YG),{color:"secondary",onClick:C},{default:(0,a.w5)((function(){return[(0,a.Uk)("Scan QR Code")]})),_:1})])]})),_:1})]})),_:1})]),ge,(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Menu")]})),_:1}),(0,a.Wm)((0,u.SU)(s.jY),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[0]||(n[0]=(0,r.iM)((function(e){return N("a")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),we])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[1]||(n[1]=(0,r.iM)((function(e){return N("b")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),he])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[2]||(n[2]=(0,r.iM)((function(e){return N("c")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.JZY),size:"large",style:{color:"#fff"}},null,8,["icon"]),be])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[3]||(n[3]=(0,r.iM)((function(e){return N("d")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),_e])]})),_:1})]})),_:1})]})),_:1}),xe,(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Laporan Absen Mingguan")]})),_:1}),(0,a.Wm)((0,u.SU)(s.jY),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.q_),null,{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.value,(function(e){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s.Ie),{key:e.date},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Q$),null,{default:(0,a.w5)((function(){return[(0,a._)("h2",null,(0,_.zw)(j(e.date)),1),(0,a._)("p",null,[(0,a.Uk)(" Masuk: "),(0,a.Wm)(d,{color:O(e.masuk)?"danger":"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.masuk?e.masuk.toDate().toLocaleString():"Belum absen masuk"),1)]})),_:2},1032,["color"])]),(0,a._)("p",null," Keluar: "+(0,_.zw)(e.keluar?e.keluar.toDate().toLocaleString():"Belum absen keluar"),1),O(e.masuk)?((0,a.wg)(),(0,a.iD)("p",Ue,[(0,a.Uk)(" Terlambat: "),(0,a.Wm)(d,{color:O(e.masuk)?"danger":"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(P(e.masuk)),1)]})),_:2},1032,["color"])])):((0,a.wg)(),(0,a.iD)("p",Se,[(0,a.Wm)(d,{color:"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Tepat Waktu")]})),_:1})]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]),(0,a.Wm)((0,u.SU)(s.Px),{"is-open":g.value.isOpen,message:g.value.message,duration:g.value.duration,color:g.value.color,onDidDismiss:n[4]||(n[4]=function(e){return g.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},We=ye,Ze=We;var De={class:"main_content_div"},Ae=(0,a._)("div",{class:"user_div"},[(0,a._)("h2")],-1),Ie=(0,a._)("div",{class:"top-radius"},null,-1),Ce={class:"content_div"},Me={class:"card-heading ion-padding"},ze=(0,a._)("br",null,null,-1),He={class:"absen-buttons"},Ee=(0,a._)("br",null,null,-1),Oe=(0,a._)("p",{style:{color:"#fff"}},"Ajukan Izin",-1),Pe=(0,a._)("p",{style:{color:"#fff"}},"Lap Kehadiran",-1),je=(0,a._)("p",{style:{color:"#fff"}},"Pengguna",-1),Ne=(0,a._)("p",{style:{color:"#fff"}},"Checkup",-1),Le=(0,a._)("br",null,null,-1),Te={key:0},Re={key:1};const Ke={__name:"SiswaPage",setup:function(e){var n=(0,m.tv)(),t=(0,u.iH)(""),o=(0,u.iH)(""),i=(0,u.iH)(!0),l=(0,u.iH)("Absen Masuk"),c=(0,u.iH)([]),k=(0,u.iH)([]),g=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),w=(0,u.iH)(null),h=(0,v.v0)(Y.H),b=(0,x.ad)(Y.H),U=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.QT)((0,x.JU)(b,"users",n));case 3:r=e.sent,r.exists()&&(a=r.data(),t.value=a.fullName,o.value=a.status),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.QT)((0,x.JU)(b,"settings","coordinates"));case 3:n=e.sent,n.exists()&&(w.value=n.data()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,x.hJ)(b,"attendance",n,"records"),r=(0,x.IO)(t,(0,x.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,x.PL)(r);case 5:a=e.sent,c.value=a.docs.map((function(e){return(0,J.Z)({date:e.id},e.data())})),W(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=new Date,n=e.getDay(),t=new Date(e);t.setDate(e.getDate()-n+(0===n?-6:1));var r=new Date(t);r.setDate(t.getDate()+6),k.value=[];for(var a=function(){var e=u.toISOString().split("T")[0],n=c.value.find((function(n){return n.date===e}));k.value.push(n||{date:e,masuk:null,keluar:null})},u=new Date(t);u<=e;u.setDate(u.getDate()+1))a()},Z=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(new Date).toISOString().split("T")[0],r=(0,x.JU)(b,"attendance",n,"records",t),e.prev=2,e.next=5,(0,x.QT)(r);case 5:a=e.sent,a.exists()?a.data().keluar?(i.value=!0,l.value="Absen Masuk"):(i.value=!1,l.value="Absen Keluar"):(i.value=!0,l.value="Absen Masuk"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error checking absen status:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n,t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.currentUser,!n){e.next=33;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(t=e.sent,t){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return r=(0,x.JU)(b,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,x.QT)(r);case 15:if(a=e.sent,!a.exists()||!a.data().masuk){e.next=19;break}return z("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,x.pl)(r,{masuk:(0,x.Bt)()},{merge:!0});case 21:console.log("Absen masuk berhasil"),z("Absen masuk berhasil","success"),i.value=!1,l.value="Absen Keluar",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting masuk time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n,t,r,a;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=h.currentUser,!n){e.next=33;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(t=e.sent,t){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return r=(0,x.JU)(b,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,x.QT)(r);case 15:if(a=e.sent,a.exists()&&!a.data().keluar){e.next=19;break}return z("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,x.r7)(r,{keluar:(0,x.Bt)()});case 21:console.log("Absen keluar berhasil"),z("Absen keluar berhasil","success"),i.value=!0,l.value="Absen Masuk",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting keluar time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i.value){e.next=5;break}return e.next=3,D();case 3:e.next=7;break;case 5:return e.next=7,A();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){var n;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.mR.checkPermission({force:!0});case 3:return e.next=5,le.mR.hideBackground();case 5:return e.next=7,le.mR.startScan();case 7:n=e.sent,n.hasContent&&M(n.content),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error("Error scanning QR code:",e.t0),z("Error scanning QR code","danger");case 15:return e.prev=15,le.mR.showBackground(),le.mR.stopScan(),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(n){var t,r,a,u,s,c,f,p;return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=h.currentUser,!t){e.next=46;break}if("non-aktif"!==o.value){e.next=5;break}return z("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,H();case 7:if(r=e.sent,r){e.next=11;break}return z("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=n.split("|"),u=(0,oe.Z)(a,2),s=u[0],c=u[1],f=(0,x.JU)(b,"attendance",t.uid,"records",new Date(c).toISOString().split("T")[0]),e.prev=13,e.next=16,(0,x.QT)(f);case 16:if(p=e.sent,"masuk"!==s){e.next=28;break}if(!p.exists()||!p.data().masuk){e.next=21;break}return z("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 21:return e.next=23,(0,x.pl)(f,{masuk:new Date(c)},{merge:!0});case 23:z("Absen masuk berhasil","success"),i.value=!1,l.value="Absen Keluar",e.next=37;break;case 28:if("keluar"!==s){e.next=37;break}if(p.exists()&&!p.data().keluar){e.next=32;break}return z("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 32:return e.next=34,(0,x.r7)(f,{keluar:new Date(c)});case 34:z("Absen keluar berhasil","success"),i.value=!0,l.value="Absen Masuk";case 37:y(t.uid),e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](13),console.error("Error processing QR code:",e.t0),z("Error processing QR code","danger");case 44:e.next=47;break;case 46:z("User tidak terautentikasi","danger");case 47:case"end":return e.stop()}}),e,null,[[13,40]])})));return function(n){return e.apply(this,arguments)}}(),z=function(e,n){g.value={isOpen:!0,message:e,duration:2e3,color:n}},H=function(){var e=(0,f.Z)((0,d.Z)().mark((function e(){return(0,d.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var t=n.coords.latitude,r=n.coords.longitude,a=E(t,r,w.value.latitude,w.value.longitude),u=.1;e(a<=u)}),(function(n){console.error("Error getting geolocation:",n),e(!1)})):(console.error("Geolocation is not supported by this browser."),e(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e,n,t,r){var a=function(e){return e*Math.PI/180},u=6371,s=a(t-e),o=a(r-n),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(a(e))*Math.cos(a(t))*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),c=u*l;return c},O=function(e){if(!e)return!1;var n=e.toDate(),t=new Date(n);return t.setHours(8,0,0,0),n>t},P=function(e){if(!e)return"0 menit";var n=e.toDate(),t=new Date(n);t.setHours(8,0,0,0);var r=n-t,a=Math.floor(r/36e5),u=Math.floor(r%36e5/6e4);return"".concat(a," jam ").concat(u," menit")},j=function(e){var n=new Date(e),t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],r=t[n.getDay()],a=n.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return"".concat(r,", ").concat(a)};(0,a.bv)((function(){(0,v.Aj)(h,(function(e){e?(U(e.uid),S(),y(e.uid),Z(e.uid)):n.push({name:"login"})}))}));var N=function(e){console.log("Navigating to menu ".concat(e))};return function(e,n){var o=(0,a.up)("center"),c=(0,a.up)("ion-icon"),d=(0,a.up)("ion-badge");return(0,a.wg)(),(0,a.j4)((0,u.SU)(s._i),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.W2),{class:"home-page"},{default:(0,a.w5)((function(){return[(0,a._)("div",De,[Ae,Ie,(0,a._)("div",Ce,[(0,a._)("div",Me,[(0,a.Wm)((0,u.SU)(s.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)((0,u.SU)(ie.w8)(new Date)),1)]})),_:1})]})),_:1}),(0,a.Wm)((0,u.SU)(s.FN),null,{default:(0,a.w5)((function(){return[ze,(0,a.Wm)(o,null,{default:(0,a.w5)((function(){return[(0,a._)("h1",null,"Hallo Selamat datang, "+(0,_.zw)(t.value)+"!",1)]})),_:1}),(0,a._)("div",He,[(0,a.Wm)((0,u.SU)(s.YG),{color:i.value?"primary":"danger",onClick:I},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(l.value),1)]})),_:1},8,["color"]),(0,a.Wm)((0,u.SU)(s.YG),{color:"secondary",onClick:C},{default:(0,a.w5)((function(){return[(0,a.Uk)("Scan QR Code")]})),_:1})])]})),_:1})]})),_:1})]),Ee,(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Menu")]})),_:1}),(0,a.Wm)((0,u.SU)(s.jY),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[0]||(n[0]=(0,r.iM)((function(e){return N("a")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),Oe])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[1]||(n[1]=(0,r.iM)((function(e){return N("b")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),Pe])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[2]||(n[2]=(0,r.iM)((function(e){return N("c")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.JZY),size:"large",style:{color:"#fff"}},null,8,["icon"]),je])]})),_:1}),(0,a.Wm)((0,u.SU)(s.wI),{size:"4"},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:"menu-item",onClick:n[3]||(n[3]=(0,r.iM)((function(e){return N("d")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,a.Wm)(c,{icon:(0,u.SU)(p.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),Ne])]})),_:1})]})),_:1})]})),_:1}),Le,(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Uk)("Laporan Absen Mingguan")]})),_:1}),(0,a.Wm)((0,u.SU)(s.jY),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Nd),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.wI),null,{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.q_),null,{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.value,(function(e){return(0,a.wg)(),(0,a.j4)((0,u.SU)(s.Ie),{key:e.date},{default:(0,a.w5)((function(){return[(0,a.Wm)((0,u.SU)(s.Q$),null,{default:(0,a.w5)((function(){return[(0,a._)("h2",null,(0,_.zw)(j(e.date)),1),(0,a._)("p",null,[(0,a.Uk)(" Masuk: "),(0,a.Wm)(d,{color:O(e.masuk)?"danger":"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(e.masuk?e.masuk.toDate().toLocaleString():"Belum absen masuk"),1)]})),_:2},1032,["color"])]),(0,a._)("p",null," Keluar: "+(0,_.zw)(e.keluar?e.keluar.toDate().toLocaleString():"Belum absen keluar"),1),O(e.masuk)?((0,a.wg)(),(0,a.iD)("p",Te,[(0,a.Uk)(" Terlambat: "),(0,a.Wm)(d,{color:O(e.masuk)?"danger":"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,_.zw)(P(e.masuk)),1)]})),_:2},1032,["color"])])):((0,a.wg)(),(0,a.iD)("p",Re,[(0,a.Wm)(d,{color:"success"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Tepat Waktu")]})),_:1})]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]),(0,a.Wm)((0,u.SU)(s.Px),{"is-open":g.value.isOpen,message:g.value.message,duration:g.value.duration,color:g.value.color,onDidDismiss:n[4]||(n[4]=function(e){return g.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},Qe=Ke,Je=Qe;var Ye=[{path:"/",redirect:"/page"},{path:"/login",name:"login",component:function(){return t.e(990).then(t.bind(t,6990))}},{path:"/splash",name:"splash",component:function(){return t.e(344).then(t.bind(t,7344))}},{path:"/page/",component:h,children:[{path:"",redirect:"/page/home"},{path:"home",name:"home",component:function(){return Promise.resolve().then(t.bind(t,2038))}},{path:"/siswa",name:"siswa",component:Je},{path:"/register",name:"register",component:K},{path:"/admin",name:"admin",component:se},{path:"/guru",name:"guru",component:Ze},{path:"homepage2",name:"homepage2",component:b["default"]},{path:"soalsoal/:menuId",name:"soalsoal",component:function(){return t.e(857).then(t.bind(t,2857))}}]}],Be=(0,c.p7)({history:(0,c.PO)("/"),routes:Ye});const Ge=Be;t(5040),t(8851),t(1292),t(1633),t(1045),t(6187),t(2299),t(3423),t(4687),t(9147),t(6250);var Ve=t(4055),Fe=t(3977),qe={apiKey:"AIzaSyAyptyOrgdjmR8VB1CGTokCcFPyR7QrKIw",authDomain:"absensi-6189c.firebaseapp.com",databaseURL:"https://absensi-6189c-default-rtdb.firebaseio.com",projectId:"absensi-6189c",storageBucket:"absensi-6189c.appspot.com",messagingSenderId:"512823944472",appId:"1:512823944472:web:eea70090a20105b850aa6d",measurementId:"G-HMH63RKJNX"},$e=(0,Fe.ZF)(qe),Xe=(0,r.ri)(l).component("swiper",Ve.tq).component("swiper-slide",Ve.o5).use(s.oX,{mode:"ios"}).use(Ge);Xe.config.globalProperties.$firebase=$e,Ge.isReady().then((function(){Xe.mount("#app")}))},5856:(e,n,t)=>{"use strict";t.d(n,{H:()=>u});var r=t(3977),a={apiKey:"AIzaSyAyptyOrgdjmR8VB1CGTokCcFPyR7QrKIw",authDomain:"absensi-6189c.firebaseapp.com",databaseURL:"https://absensi-6189c-default-rtdb.firebaseio.com",projectId:"absensi-6189c",storageBucket:"absensi-6189c.appspot.com",messagingSenderId:"512823944472",appId:"1:512823944472:web:eea70090a20105b850aa6d",measurementId:"G-HMH63RKJNX"},u=(0,r.ZF)(a)},2038:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>C});var r=t(6084),a=t(3144),u=t(124),s=t(8534),o=(t(1249),t(8733),t(3710),t(7658),t(8309),t(6252)),i=t(2262),l=t(3577),c=t(9963),d=t(4720),f=t(2274),p=t(2201),m=t(316),v=t(6100),k=t(6693),g=t(5856),w={class:"main_content_div"},h=(0,o._)("div",{class:"user_div"},[(0,o._)("h2")],-1),b=(0,o._)("div",{class:"top-radius"},null,-1),_={class:"content_div"},x={class:"card-heading ion-padding"},U=(0,o._)("br",null,null,-1),S={class:"absen-buttons"},y=(0,o._)("br",null,null,-1),W=["onClick"],Z=["src"],D={style:{color:"black"}};const A={__name:"HomePage2",setup:function(e){var n=(0,p.tv)(),t=(0,i.iH)([]),A=(0,i.iH)(""),I=(0,i.iH)(!0),C=(0,i.iH)("Absen Masuk"),M=(0,i.iH)([]),z=(0,i.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),H=(0,m.v0)(g.H),E=(0,v.ad)(g.H),O=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){var t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.QT)((0,v.JU)(E,"users",n));case 3:t=e.sent,t.exists()&&(A.value=t.data().fullName),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){var t,r,s;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,v.hJ)(E,"attendance",n,"records"),r=(0,v.IO)(t,(0,v.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,v.PL)(r);case 5:s=e.sent,M.value=s.docs.map((function(e){return(0,a.Z)({date:e.id},e.data())})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=H.currentUser,!n){e.next=18;break}return t=(0,v.JU)(E,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=3,e.next=6,(0,v.pl)(t,{masuk:(0,v.Bt)()},{merge:!0});case 6:K("Absen masuk berhasil","success"),I.value=!1,C.value="Absen Keluar",P(n.uid),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.error("Error setting masuk time:",e.t0),K("Error setting masuk time","danger");case 16:e.next=19;break;case 18:K("User tidak terautentikasi","danger");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var n,t;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=H.currentUser,!n){e.next=18;break}return t=(0,v.JU)(E,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=3,e.next=6,(0,v.r7)(t,{keluar:(0,v.Bt)()});case 6:K("Absen keluar berhasil","success"),I.value=!0,C.value="Absen Masuk",P(n.uid),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.error("Error setting keluar time:",e.t0),K("Error setting keluar time","danger");case 16:e.next=19;break;case 18:K("User tidak terautentikasi","danger");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!I.value){e.next=5;break}return e.next=3,j();case 3:e.next=7;break;case 5:return e.next=7,N();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var n;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.mR.checkPermission({force:!0});case 3:return e.next=5,k.mR.hideBackground();case 5:return e.next=7,k.mR.startScan();case 7:n=e.sent,n.hasContent&&R(n.content),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error("Error scanning QR code:",e.t0),K("Error scanning QR code","danger");case 15:return e.prev=15,k.mR.showBackground(),k.mR.stopScan(),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(n){var t,a,s,o,i,l;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=H.currentUser,!t){e.next=28;break}if(a=n.split("|"),s=(0,r.Z)(a,2),o=s[0],i=s[1],l=(0,v.JU)(E,"attendance",t.uid,"records",new Date(i).toISOString().split("T")[0]),e.prev=4,"masuk"!==o){e.next=13;break}return e.next=8,(0,v.pl)(l,{masuk:new Date(i)},{merge:!0});case 8:K("Absen masuk berhasil","success"),I.value=!1,C.value="Absen Keluar",e.next=19;break;case 13:if("keluar"!==o){e.next=19;break}return e.next=16,(0,v.r7)(l,{keluar:new Date(i)});case 16:K("Absen keluar berhasil","success"),I.value=!0,C.value="Absen Masuk";case 19:P(t.uid),e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](4),console.error("Error processing QR code:",e.t0),K("Error processing QR code","danger");case 26:e.next=29;break;case 28:K("User tidak terautentikasi","danger");case 29:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(n){return e.apply(this,arguments)}}(),K=function(e,n){z.value={isOpen:!0,message:e,duration:2e3,color:n}};(0,o.bv)((function(){(0,m.Aj)(H,(function(e){e?(O(e.uid),P(e.uid)):n.push({name:"login"})}))}));var Q=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.push("/page/home/soalsoal/".concat(t.id))["catch"]((function(e){console.error("Error navigating:",e)}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return function(e,n){var r=(0,o.up)("center");return(0,o.wg)(),(0,o.j4)((0,i.SU)(d._i),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.W2),{class:"home-page"},{default:(0,o.w5)((function(){return[(0,o._)("div",w,[h,b,(0,o._)("div",_,[(0,o._)("div",x,[(0,o.Wm)((0,i.SU)(d.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,l.zw)((0,i.SU)(f.w8)(new Date)),1)]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(d.FN),null,{default:(0,o.w5)((function(){return[U,(0,o.Wm)(r,null,{default:(0,o.w5)((function(){return[(0,o._)("h1",null,"Hallo Selamat datang, "+(0,l.zw)(A.value)+"!",1)]})),_:1}),(0,o._)("div",S,[(0,o.Wm)((0,i.SU)(d.YG),{color:I.value?"primary":"danger",onClick:L},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,l.zw)(C.value),1)]})),_:1},8,["color"]),(0,o.Wm)((0,i.SU)(d.YG),{color:"secondary",onClick:T},{default:(0,o.w5)((function(){return[(0,o.Uk)("Scan QR Code")]})),_:1})])]})),_:1})]})),_:1})]),y,(0,o.Wm)((0,i.SU)(d.wI),null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Laporan Absen")]})),_:1}),(0,o.Wm)((0,i.SU)(d.jY),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.Nd),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.wI),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.q_),null,{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(M.value,(function(e){return(0,o.wg)(),(0,o.j4)((0,i.SU)(d.Ie),{key:e.date},{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.Q$),null,{default:(0,o.w5)((function(){return[(0,o._)("h2",null,(0,l.zw)(e.date),1),(0,o._)("p",null," Masuk: "+(0,l.zw)(e.masuk?e.masuk.toDate().toLocaleString():"Belum absen masuk"),1),(0,o._)("p",null," Keluar: "+(0,l.zw)(e.keluar?e.keluar.toDate().toLocaleString():"Belum absen keluar"),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,o.Wm)((0,i.SU)(d.jY),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,i.SU)(d.Nd),null,{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.value,(function(e){return(0,o.wg)(),(0,o.j4)((0,i.SU)(d.wI),{key:e.id,size:"3"},{default:(0,o.w5)((function(){return[(0,o._)("div",{class:"item-menu",onClick:(0,c.iM)((function(n){return Q(e)}),["prevent"])},[(0,o._)("img",{alt:"menu",src:e.imageUrl},null,8,Z),(0,o._)("h5",D,(0,l.zw)(e.name),1)],8,W)]})),_:2},1024)})),128))]})),_:1})]})),_:1})])]),(0,o.Wm)((0,i.SU)(d.Px),{"is-open":z.value.isOpen,message:z.value.message,duration:z.value.duration,color:z.value.color,onDidDismiss:n[0]||(n[0]=function(e){return z.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},I=A,C=I}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var u=n[r]={exports:{}};return e[r].call(u.exports,u,u.exports,t),u.exports}t.m=e,(()=>{var e=[];t.O=(n,r,a,u)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,a,u]=e[c],o=!0,i=0;i<r.length;i++)(!1&u||s>=u)&&Object.keys(t.O).every((e=>t.O[e](r[i])))?r.splice(i--,1):(o=!1,u<s&&(s=u));if(o){e.splice(c--,1);var l=a();void 0!==l&&(n=l)}}return n}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[r,a,u]}})(),(()=>{t.n=e=>{var n=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(n,{a:n}),n}})(),(()=>{t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((n,r)=>(t.f[r](e,n),n)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{74:"725c4a2f",78:"a73efb59",321:"a4e2b2ce",338:"90b13988",344:"ad35115c",486:"c028a8a5",521:"e11f95d0",544:"4f8066d7",553:"0d1fd7ed",576:"8b89589e",753:"409f699d",775:"eb8c843a",857:"222fb635",990:"9f029c06"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+e+"."+{344:"bd9d047a",857:"584d91c7",990:"c272743a"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{var e={},n="resep-bunda:";t.l=(r,a,u,s)=>{if(e[r])e[r].push(a);else{var o,i;if(void 0!==u)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==n+u){o=d;break}}o||(i=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,t.nc&&o.setAttribute("nonce",t.nc),o.setAttribute("data-webpack",n+u),o.src=r),e[r]=[a];var f=(n,t)=>{o.onerror=o.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(t))),n)return n(t)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),i&&document.head.appendChild(o)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,n,t,r,a)=>{var u=document.createElement("link");u.rel="stylesheet",u.type="text/css";var s=t=>{if(u.onerror=u.onload=null,"load"===t.type)r();else{var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.href||n,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.type=s,i.request=o,u.parentNode&&u.parentNode.removeChild(u),a(i)}};return u.onerror=u.onload=s,u.href=n,t?t.parentNode.insertBefore(u,t.nextSibling):document.head.appendChild(u),u},n=(e,n)=>{for(var t=document.getElementsByTagName("link"),r=0;r<t.length;r++){var a=t[r],u=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(u===e||u===n))return a}var s=document.getElementsByTagName("style");for(r=0;r<s.length;r++){a=s[r],u=a.getAttribute("data-href");if(u===e||u===n)return a}},r=r=>new Promise(((a,u)=>{var s=t.miniCssF(r),o=t.p+s;if(n(s,o))return a();e(r,o,null,a,u)})),a={143:0};t.f.miniCss=(e,n)=>{var t={344:1,857:1,990:1};a[e]?n.push(a[e]):0!==a[e]&&t[e]&&n.push(a[e]=r(e).then((()=>{a[e]=0}),(n=>{throw delete a[e],n})))}}})(),(()=>{var e={143:0};t.f.j=(n,r)=>{var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)r.push(a[2]);else{var u=new Promise(((t,r)=>a=e[n]=[t,r]));r.push(a[2]=u);var s=t.p+t.u(n),o=new Error,i=r=>{if(t.o(e,n)&&(a=e[n],0!==a&&(e[n]=void 0),a)){var u=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+n+" failed.\n("+u+": "+s+")",o.name="ChunkLoadError",o.type=u,o.request=s,a[1](o)}};t.l(s,i,"chunk-"+n,n)}},t.O.j=n=>0===e[n];var n=(n,r)=>{var a,u,[s,o,i]=r,l=0;if(s.some((n=>0!==e[n]))){for(a in o)t.o(o,a)&&(t.m[a]=o[a]);if(i)var c=i(t)}for(n&&n(r);l<s.length;l++)u=s[l],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(c)},r=self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})();var r=t.O(void 0,[998],(()=>t(3546)));r=t.O(r)})();
//# sourceMappingURL=app.b16331a0.js.map