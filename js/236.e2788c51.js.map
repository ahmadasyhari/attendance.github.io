{"version":3,"file":"js/236.e2788c51.js","mappings":"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","sources":["webpack://resep-bunda/./src/views/guru/JadwalUjian.vue","webpack://resep-bunda/./src/views/guru/JadwalUjian.vue?de2f"],"sourcesContent":["<template>\n  <ion-page>\n    <ion-header mode=\"ios\">\n      <ion-toolbar>\n        <ion-title>Buat Jadwal Ujian</ion-title>\n        <ion-back-button slot=\"start\" default-href=\"/\" />\n      </ion-toolbar>\n    </ion-header>\n    <ion-content :fullscreen=\"true\">\n      <ion-content class=\"ion-padding\">\n        <ion-item>\n          <ion-label>Tanggal Ujian</ion-label>\n          <ion-button @click=\"showTanggalPicker = true\">\n            {{ tanggalUjian ? formatDate(tanggalUjian) : \"Pilih Tanggal\" }}\n          </ion-button>\n          <ion-datetime\n            v-if=\"showTanggalPicker\"\n            v-model=\"tanggalUjian\"\n            display-format=\"DD MMM YYYY\"\n            placeholder=\"Pilih Tanggal\"\n            @ionChange=\"showTanggalPicker = false\"\n          ></ion-datetime>\n        </ion-item>\n        <ion-item>\n          <ion-label>Kelas</ion-label>\n          <ion-select v-model=\"kelas\" placeholder=\"Pilih Kelas\">\n            <ion-select-option\n              v-for=\"kelas in classes\"\n              :key=\"kelas\"\n              :value=\"kelas\"\n            >\n              {{ kelas }}\n            </ion-select-option>\n          </ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-label>Mata Pelajaran</ion-label>\n          <ion-select\n            v-model=\"mataPelajaran\"\n            placeholder=\"Pilih Mata Pelajaran\"\n          >\n            <ion-select-option\n              v-for=\"subject in subjects\"\n              :key=\"subject\"\n              :value=\"subject\"\n            >\n              {{ subject }}\n            </ion-select-option>\n          </ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-label>Pilih Soal</ion-label>\n          <ion-select multiple v-model=\"selectedSoal\" placeholder=\"Pilih Soal\">\n            <ion-select-option\n              v-for=\"soal in filteredSoal\"\n              :key=\"soal.id\"\n              :value=\"soal.id\"\n            >\n              {{ soal.question }}\n            </ion-select-option>\n          </ion-select>\n        </ion-item>\n        <ion-button expand=\"block\" @click=\"buatJadwalUjian\"\n          >Buat Jadwal Ujian</ion-button\n        >\n        <ion-grid>\n          <ion-row>\n            <ion-col>\n              <h2>Daftar Jadwal Ujian</h2>\n              <ion-list>\n                <ion-item>\n                  <ion-label>\n                    <table class=\"table\">\n                      <thead>\n                        <tr>\n                          <th>Tanggal</th>\n                          <th>Kelas</th>\n                          <th>Mata Pelajaran</th>\n                          <th>Soal</th>\n                          <th>Aksi</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        <tr v-for=\"jadwal in daftarJadwal\" :key=\"jadwal.id\">\n                          <td>{{ formatDate(jadwal.tanggalUjian) }}</td>\n                          <td>{{ jadwal.kelas }}</td>\n                          <td>{{ jadwal.mataPelajaran }}</td>\n                          <td>{{ jadwal.soalCount }}</td>\n                          <td>\n                            <ion-button @click=\"hapusJadwal(jadwal.id)\"\n                              >Hapus</ion-button\n                            >\n                            <ion-button\n                              @click=\"toggleAktif(jadwal.id, jadwal.aktif)\"\n                            >\n                              {{ jadwal.aktif ? \"Nonaktifkan\" : \"Aktifkan\" }}\n                            </ion-button>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </ion-label>\n                </ion-item>\n              </ion-list>\n              <ion-button expand=\"block\" @click=\"loadMore\" v-if=\"showLoadMore\"\n                >Load More</ion-button\n              >\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-content>\n      <ion-toast\n        :is-open=\"toast.isOpen\"\n        :message=\"toast.message\"\n        :duration=\"toast.duration\"\n        :color=\"toast.color\"\n        @did-dismiss=\"() => (toast.isOpen = false)\"\n      ></ion-toast>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script setup>\nimport {\n  IonPage,\n  IonHeader,\n  IonToolbar,\n  IonTitle,\n  IonBackButton,\n  IonContent,\n  IonItem,\n  IonLabel,\n  IonDatetime,\n  IonSelect,\n  IonSelectOption,\n  IonButton,\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonList,\n  IonToast,\n} from \"@ionic/vue\";\nimport { ref, onMounted, computed, watch } from \"vue\";\nimport {\n  getFirestore,\n  collection,\n  getDocs,\n  addDoc,\n  doc,\n  updateDoc,\n  deleteDoc,\n  query,\n  orderBy,\n} from \"firebase/firestore\";\nimport { firebaseApp } from \"../firebase\";\n\nconst db = getFirestore(firebaseApp);\n\nconst tanggalUjian = ref(\"\");\nconst kelas = ref(\"\");\nconst mataPelajaran = ref(\"\");\nconst selectedSoal = ref([]);\nconst daftarSoal = ref([]);\nconst daftarJadwal = ref([]);\nconst showTanggalPicker = ref(false);\n\nconst toast = ref({\n  isOpen: false,\n  message: \"\",\n  duration: 2000,\n  color: \"success\",\n});\n\nconst subjects = [\n  \"Matematika\",\n  \"Bahasa Indonesia\",\n  \"Bahasa Inggris\",\n  \"IPA\",\n  \"IPS\",\n];\nconst classes = [\n  \"Kelas 1\",\n  \"Kelas 2\",\n  \"Kelas 3\",\n  \"Kelas 4\",\n  \"Kelas 5\",\n  \"Kelas 6\",\n];\n\nconst fetchSoal = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, \"soal\"));\n    daftarSoal.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n    }));\n    console.log(\"Daftar Soal:\", daftarSoal.value); // Debugging log\n  } catch (error) {\n    console.error(\"Error fetching soal:\", error);\n  }\n};\n\nconst fetchJadwal = async () => {\n  try {\n    const querySnapshot = await getDocs(\n      query(collection(db, \"jadwal\"), orderBy(\"tanggalUjian\"))\n    );\n    daftarJadwal.value = querySnapshot.docs.map((doc) => ({\n      id: doc.id,\n      ...doc.data(),\n      soalCount: doc.data().soal.length,\n    }));\n  } catch (error) {\n    console.error(\"Error fetching jadwal:\", error);\n    showToast(\"Terjadi kesalahan saat mengambil data jadwal.\", \"danger\");\n  }\n};\n\nconst buatJadwalUjian = async () => {\n  if (\n    !tanggalUjian.value ||\n    !kelas.value ||\n    !mataPelajaran.value ||\n    selectedSoal.value.length === 0\n  ) {\n    showToast(\"Harap lengkapi semua field.\", \"danger\");\n    return;\n  }\n\n  try {\n    await addDoc(collection(db, \"jadwal\"), {\n      tanggalUjian: tanggalUjian.value,\n      kelas: kelas.value,\n      mataPelajaran: mataPelajaran.value,\n      soal: selectedSoal.value,\n      aktif: true,\n    });\n    showToast(\"Jadwal ujian berhasil dibuat.\", \"success\");\n    resetForm();\n    fetchJadwal();\n  } catch (error) {\n    console.error(\"Error creating jadwal:\", error);\n    showToast(\"Terjadi kesalahan saat membuat jadwal ujian.\", \"danger\");\n  }\n};\n\nconst resetForm = () => {\n  tanggalUjian.value = \"\";\n  kelas.value = \"\";\n  mataPelajaran.value = \"\";\n  selectedSoal.value = [];\n};\n\nconst hapusJadwal = async (jadwalId) => {\n  try {\n    await deleteDoc(doc(db, \"jadwal\", jadwalId));\n    showToast(\"Jadwal ujian berhasil dihapus.\", \"success\");\n    fetchJadwal();\n  } catch (error) {\n    console.error(\"Error deleting jadwal:\", error);\n    showToast(\"Terjadi kesalahan saat menghapus jadwal ujian.\", \"danger\");\n  }\n};\n\nconst toggleAktif = async (jadwalId, isActive) => {\n  try {\n    await updateDoc(doc(db, \"jadwal\", jadwalId), {\n      aktif: !isActive,\n    });\n    showToast(\"Status jadwal ujian berhasil diubah.\", \"success\");\n    fetchJadwal();\n  } catch (error) {\n    console.error(\"Error updating jadwal status:\", error);\n    showToast(\"Terjadi kesalahan saat mengubah status jadwal.\", \"danger\");\n  }\n};\n\n// const doRefresh = (event) => {\n//   setTimeout(() => {\n//     fetchJadwal();\n//     event.target.complete();\n//   }, 2000);\n// };\n\nconst formatDate = (date) => {\n  if (!date) return \"N/A\";\n  const d = new Date(date);\n  return d.toLocaleDateString(\"id-ID\", {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n};\n\nconst filteredSoal = computed(() => {\n  return daftarSoal.value.filter(\n    (soal) => soal.class === kelas.value && soal.subject === mataPelajaran.value\n  );\n});\n\nwatch([kelas, mataPelajaran], () => {\n  selectedSoal.value = [];\n});\n\nonMounted(() => {\n  fetchSoal();\n  fetchJadwal();\n});\n\nconst showToast = (message, color) => {\n  toast.value = {\n    isOpen: true,\n    message,\n    duration: 2000,\n    color,\n  };\n};\n</script>\n<style scoped>\n.table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\n.table th,\n.table td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\n\n.table th {\n  background-color: #f2f2f2;\n}\n\n.table tbody tr:hover {\n  background-color: #f1f1f1;\n}\n</style>\n","import script from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./JadwalUjian.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./JadwalUjian.vue?vue&type=style&index=0&id=1c336450&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1c336450\"]])\n\nexport default __exports__"],"names":["db","getFirestore","firebaseApp","tanggalUjian","ref","kelas","mataPelajaran","selectedSoal","daftarSoal","daftarJadwal","showTanggalPicker","toast","isOpen","message","duration","color","subjects","classes","fetchSoal","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","querySnapshot","wrap","_context","prev","next","getDocs","collection","sent","value","docs","map","doc","_objectSpread","id","data","console","log","t0","error","stop","apply","arguments","fetchJadwal","_ref2","_callee2","_context2","query","orderBy","soalCount","soal","length","showToast","buatJadwalUjian","_ref3","_callee3","_context3","abrupt","addDoc","aktif","resetForm","hapusJadwal","_ref4","_callee4","jadwalId","_context4","deleteDoc","_x","toggleAktif","_ref5","_callee5","isActive","_context5","updateDoc","_x2","_x3","formatDate","date","d","Date","toLocaleDateString","year","month","day","filteredSoal","computed","filter","subject","watch","onMounted","__exports__"],"sourceRoot":""}