"use strict";(self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[]).push([[952],{4964:(e,n,t)=>{var a=t(5112),u=a("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[u]=!1,"/./"[e](n)}catch(a){}}return!1}},7850:(e,n,t)=>{var a=t(111),u=t(4326),r=t(5112),l=r("match");e.exports=function(e){var n;return a(e)&&(void 0!==(n=e[l])?!!n:"RegExp"===u(e))}},3929:(e,n,t)=>{var a=t(7850),u=TypeError;e.exports=function(e){if(a(e))throw u("The method doesn't accept regular expressions");return e}},6699:(e,n,t)=>{var a=t(2109),u=t(1318).includes,r=t(7293),l=t(1223),i=r((function(){return!Array(1).includes()}));a({target:"Array",proto:!0,forced:i},{includes:function(e){return u(this,e,arguments.length>1?arguments[1]:void 0)}}),l("includes")},2023:(e,n,t)=>{var a=t(2109),u=t(1702),r=t(3929),l=t(4488),i=t(1340),o=t(4964),c=u("".indexOf);a({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~c(i(l(this)),i(r(e)),arguments.length>1?arguments[1]:void 0)}})},3952:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var a=t(124),u=t(9584),r=t(5082),l=t(8534),i=(t(7042),t(7327),t(1539),t(6699),t(2023),t(1249),t(7658),t(2564),t(3112),t(6647),t(3710),t(9714),t(2222),t(6252)),o=t(2262),c=t(3577),s=t(286),d=t(316),f=t(6100),m=t(5856),v=t(4105),p=(0,i._)("h2",null,"Daftar Pengajuan Izin",-1);const S={__name:"LaporanIzin",setup:function(e){var n=(0,d.v0)(m.H),t=(0,f.ad)(m.H),S=(0,o.iH)([]),w=(0,o.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),k=(0,o.iH)(!1),h=(0,o.iH)(""),U=(0,o.iH)(""),g=(0,o.iH)(""),_=(0,o.iH)(""),b=(0,o.iH)(10),W=(0,o.iH)(null),z=(0,o.iH)(!1),y=(0,o.iH)(""),D=[{value:0,label:"January"},{value:1,label:"February"},{value:2,label:"March"},{value:3,label:"April"},{value:4,label:"May"},{value:5,label:"June"},{value:6,label:"July"},{value:7,label:"August"},{value:8,label:"September"},{value:9,label:"October"},{value:10,label:"November"},{value:11,label:"December"}],x=(0,i.Fl)((function(){return S.value.filter((function(e){var n=e.fullName.toLowerCase().includes(_.value.toLowerCase()),t=e.startDate?e.startDate.toDate().getMonth():null,a=""===y.value||t===y.value;return n&&a})).slice(0,b.value)})),I=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var n,l,i,o,c,s=arguments;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]&&s[0],l=n?(0,f.IO)((0,f.hJ)(t,"izin"),(0,f.ar)("fullName",">=",_.value),(0,f.ar)("fullName","<=",_.value+""),(0,f.b9)(b.value)):(0,f.IO)((0,f.hJ)(t,"izin"),(0,f.ar)("fullName",">=",_.value),(0,f.ar)("fullName","<=",_.value+""),(0,f.TQ)(W.value),(0,f.b9)(b.value)),e.prev=2,e.next=5,(0,f.PL)(l);case 5:i=e.sent,o=i.docs.map((function(e){return(0,r.Z)((0,r.Z)({id:e.id},e.data()),{},{startDate:e.data().startDate,endDate:e.data().endDate})})),n?S.value=o:(c=S.value).push.apply(c,(0,u.Z)(o)),W.value=i.docs[i.docs.length-1],z.value=i.docs.length===b.value,console.log("Data izin berhasil diambil:",S.value),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](2),console.error("Error fetching izin data:",e.t0),Y("Terjadi kesalahan saat mengambil data izin","danger");case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){I(!0)},C=function(){I()},H=function(e,n){U.value=e,g.value=n,k.value=!0},N=function(){k.value=!1,h.value="",U.value="",g.value=""},Z=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.r7)((0,f.JU)(t,"izin",U.value),{status:g.value,keteranganStatus:h.value});case 3:Y("Status pengajuan izin berhasil diubah menjadi ".concat(g.value),"success"),I(!0),N(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error updating izin status:",e.t0),Y("Terjadi kesalahan saat mengubah status izin","danger");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(e){setTimeout((function(){I(!0),e.target.complete()}),2e3)},Y=function(e,n){w.value={isOpen:!0,message:e,duration:2e3,color:n}},G=function(e){if(!e)return"N/A";var n=e.toDate(),t=n.getDate().toString().padStart(2,"0"),a=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getFullYear();return"".concat(t,"/").concat(a,"/").concat(u)},P=function(){var e=x.value.filter((function(e){return"sakit"===e.izinStatus||"izin"===e.izinStatus}));if(0!==e.length){var n=e.map((function(e){return{fullName:e.fullName,role:e.role,izinStatus:e.izinStatus,durasi:e.durasi,keterangan:e.keterangan,fromDate:G(e.startDate),toDate:G(e.endDate),status:e.status,keteranganStatus:e.keteranganStatus}})),t=v.P6.json_to_sheet(n),a=v.P6.book_new();v.P6.book_append_sheet(a,t,"Laporan Izin dan Sakit"),v.NC(a,"laporan_izin_dan_sakit.xlsx"),Y("Laporan izin dan sakit berhasil diekspor","success")}else Y("Tidak ada data izin atau sakit untuk bulan yang dipilih","warning")};return(0,i.bv)((function(){(0,d.Aj)(n,(function(e){e?I(!0):(console.error("User not authenticated"),Y("Pengguna tidak terautentikasi","danger"))}))})),function(e,n){return(0,i.wg)(),(0,i.j4)((0,o.SU)(s._i),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Gu),{mode:"ios"},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.sr),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.wd),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Informasi Pengajuan Izin")]})),_:1}),(0,i.Wm)((0,o.SU)(s.oU),{slot:"start","default-href":"/"})]})),_:1})]})),_:1}),(0,i.Wm)((0,o.SU)(s.W2),{fullscreen:!0},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.nJ),{slot:"fixed",onIonRefresh:n[0]||(n[0]=function(e){return A(e)})},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Wo))]})),_:1}),(0,i.Wm)((0,o.SU)(s.W2),{class:"ion-padding"},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Ie),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Q$),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Search by Name")]})),_:1}),(0,i.Wm)((0,o.SU)(s.pK),{modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return _.value=e}),placeholder:"Enter name to search"},null,8,["modelValue"])]})),_:1}),(0,i.Wm)((0,o.SU)(s.Ie),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Q$),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Bulan")]})),_:1}),(0,i.Wm)((0,o.SU)(s.t9),{modelValue:y.value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return y.value=e}),placeholder:"Pilih Bulan"},{default:(0,i.w5)((function(){return[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(D,(function(e){return(0,i.Wm)((0,o.SU)(s.n0),{key:e.value,value:e.value},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,c.zw)(e.label),1)]})),_:2},1032,["value"])})),64))]})),_:1},8,["modelValue"])]})),_:1}),(0,i.Wm)((0,o.SU)(s.YG),{expand:"block",onClick:j},{default:(0,i.w5)((function(){return[(0,i.Uk)("Search")]})),_:1}),(0,i.Wm)((0,o.SU)(s.jY),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Nd),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.wI),null,{default:(0,i.w5)((function(){return[p,(0,i.Wm)((0,o.SU)(s.q_),null,{default:(0,i.w5)((function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.value,(function(e){return(0,i.wg)(),(0,i.j4)((0,o.SU)(s.Ie),{key:e.id},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Q$),null,{default:(0,i.w5)((function(){return[(0,i._)("h3",null,(0,c.zw)(e.fullName)+" - "+(0,c.zw)(e.role),1),(0,i._)("p",null,"Status: "+(0,c.zw)(e.izinStatus),1),(0,i._)("p",null,"Durasi: "+(0,c.zw)(e.durasi)+" hari",1),(0,i._)("p",null,"Keterangan: "+(0,c.zw)(e.keterangan),1),(0,i._)("p",null,"Dari: "+(0,c.zw)(G(e.startDate)),1),(0,i._)("p",null,"Sampai: "+(0,c.zw)(G(e.endDate)),1),(0,i._)("p",null,"Status Admin: "+(0,c.zw)(e.status),1),(0,i._)("p",null,"Keterangan Admin: "+(0,c.zw)(e.keteranganStatus),1)]})),_:2},1024),(0,i.Wm)((0,o.SU)(s.YG),{color:"success",onClick:function(n){return H(e.id,"disetujui")}},{default:(0,i.w5)((function(){return[(0,i.Uk)("Setujui")]})),_:2},1032,["onClick"]),(0,i.Wm)((0,o.SU)(s.YG),{color:"danger",onClick:function(n){return H(e.id,"ditolak")}},{default:(0,i.w5)((function(){return[(0,i.Uk)("Tolak")]})),_:2},1032,["onClick"])]})),_:2},1024)})),128))]})),_:1}),z.value?((0,i.wg)(),(0,i.j4)((0,o.SU)(s.YG),{key:0,expand:"block",onClick:C},{default:(0,i.w5)((function(){return[(0,i.Uk)("Load More")]})),_:1})):(0,i.kq)("",!0)]})),_:1})]})),_:1})]})),_:1}),(0,i.Wm)((0,o.SU)(s.YG),{expand:"block",onClick:P},{default:(0,i.w5)((function(){return[(0,i.Uk)("Export Laporan Sakit")]})),_:1})]})),_:1}),(0,i.Wm)((0,o.SU)(s.Px),{"is-open":w.value.isOpen,message:w.value.message,duration:w.value.duration,color:w.value.color,onDidDismiss:n[3]||(n[3]=function(){return w.value.isOpen=!1})},null,8,["is-open","message","duration","color"]),(0,i.Wm)((0,o.SU)(s.ki),{"is-open":k.value,onDidDismiss:N},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Gu),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.sr),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.wd),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Ubah Status Izin")]})),_:1}),(0,i.Wm)((0,o.SU)(s.Sm),{slot:"end"},{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.YG),{onClick:N},{default:(0,i.w5)((function(){return[(0,i.Uk)("Close")]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.Wm)((0,o.SU)(s.W2),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Ie),null,{default:(0,i.w5)((function(){return[(0,i.Wm)((0,o.SU)(s.Q$),null,{default:(0,i.w5)((function(){return[(0,i.Uk)("Keterangan")]})),_:1}),(0,i.Wm)((0,o.SU)(s.g2),{modelValue:h.value,"onUpdate:modelValue":n[4]||(n[4]=function(e){return h.value=e}),placeholder:"Masukkan keterangan"},null,8,["modelValue"])]})),_:1}),(0,i.Wm)((0,o.SU)(s.YG),{expand:"block",onClick:Z},{default:(0,i.w5)((function(){return[(0,i.Uk)("Simpan")]})),_:1})]})),_:1})]})),_:1},8,["is-open"])]})),_:1})]})),_:1})}}},w=S,k=w},9584:(e,n,t)=>{t.d(n,{Z:()=>o});t(9753);var a=t(9227);function u(e){if(Array.isArray(e))return(0,a.Z)(e)}t(2526),t(1817),t(1539),t(2165),t(8783),t(3948),t(1038);function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var l=t(2780);t(1703),t(6647);function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e){return u(e)||r(e)||(0,l.Z)(e)||i()}}}]);
//# sourceMappingURL=952.15d7c3bf.js.map