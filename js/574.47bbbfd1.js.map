{"version":3,"file":"js/574.47bbbfd1.js","mappings":"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","sources":["webpack://resep-bunda/./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://resep-bunda/./node_modules/core-js/internals/is-regexp.js","webpack://resep-bunda/./node_modules/core-js/internals/not-a-regexp.js","webpack://resep-bunda/./node_modules/core-js/modules/es.array.includes.js","webpack://resep-bunda/./node_modules/core-js/modules/es.string.includes.js","webpack://resep-bunda/./src/views/admin/HalamanPengguna.vue","webpack://resep-bunda/./src/views/admin/HalamanPengguna.vue?6f49","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"],"sourcesContent":["'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');\n};\n","'use strict';\nvar isRegExp = require('../internals/is-regexp');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw $TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar fails = require('../internals/fails');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// FF99+ bug\nvar BROKEN_ON_SPARSE = fails(function () {\n  // eslint-disable-next-line es/no-array-prototype-includes -- detection\n  return !Array(1).includes();\n});\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n","<template>\r\n  <ion-page>\r\n    <ion-header mode=\"ios\">\r\n      <ion-toolbar>\r\n        <ion-title>Pengguna</ion-title>\r\n        <ion-back-button slot=\"start\" default-href=\"/\" />\r\n      </ion-toolbar>\r\n    </ion-header>\r\n    <ion-content :fullscreen=\"true\">\r\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\r\n        <ion-refresher-content />\r\n      </ion-refresher>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item>\r\n          <ion-label>Cari Pengguna</ion-label>\r\n          <ion-input\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"Masukkan nama pengguna\"\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-button expand=\"block\" @click=\"filterUsers\">Cari</ion-button>\r\n        <ion-grid>\r\n          <ion-row>\r\n            <ion-col>\r\n              <h2>Daftar Pengguna</h2>\r\n              <ion-list>\r\n                <ion-item>\r\n                  <ion-label>\r\n                    <table>\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Nama Lengkap</th>\r\n                          <th>Username</th>\r\n                          <th>Email</th>\r\n                          <th>Role</th>\r\n                          <th>QR Code</th>\r\n                          <th>Status</th>\r\n                          <th>Aksi</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr v-for=\"user in filteredUsers\" :key=\"user.id\">\r\n                          <td>{{ user.fullName }}</td>\r\n                          <td>{{ user.username }}</td>\r\n                          <td>{{ user.email }}</td>\r\n                          <td>{{ user.role }}</td>\r\n                          <td>{{ user.qrCode }}</td>\r\n                          <td>{{ user.status }}</td>\r\n                          <td>\r\n                            <ion-button @click=\"editUser(user)\"\r\n                              >Edit</ion-button\r\n                            >\r\n                            <ion-button\r\n                              @click=\"changeStatus(user)\"\r\n                              :color=\"\r\n                                user.status === 'aktif' ? 'danger' : 'success'\r\n                              \"\r\n                            >\r\n                              {{\r\n                                user.status === \"aktif\"\r\n                                  ? \"Nonaktifkan\"\r\n                                  : \"Aktifkan\"\r\n                              }}\r\n                            </ion-button>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </ion-label>\r\n                </ion-item>\r\n              </ion-list>\r\n              <ion-button expand=\"block\" @click=\"loadMore\" v-if=\"showLoadMore\"\r\n                >Load More</ion-button\r\n              >\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n        <ion-button expand=\"block\" @click=\"exportToExcel\"\r\n          >Export ke Excel</ion-button\r\n        >\r\n      </ion-content>\r\n      <ion-toast\r\n        :is-open=\"toast.isOpen\"\r\n        :message=\"toast.message\"\r\n        :duration=\"toast.duration\"\r\n        :color=\"toast.color\"\r\n        @did-dismiss=\"() => (toast.isOpen = false)\"\r\n      ></ion-toast>\r\n\r\n      <ion-modal :is-open=\"isModalOpen\" @did-dismiss=\"closeModal\">\r\n        <ion-header>\r\n          <ion-toolbar>\r\n            <ion-title>Edit Pengguna</ion-title>\r\n            <ion-buttons slot=\"end\">\r\n              <ion-button @click=\"closeModal\">Close</ion-button>\r\n            </ion-buttons>\r\n          </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content>\r\n          <ion-item v-if=\"selectedUser\">\r\n            <ion-label>Nama Lengkap</ion-label>\r\n            <ion-input v-model=\"selectedUser.fullName\"></ion-input>\r\n          </ion-item>\r\n          <ion-item v-if=\"selectedUser\">\r\n            <ion-label>Username</ion-label>\r\n            <ion-input v-model=\"selectedUser.username\"></ion-input>\r\n          </ion-item>\r\n          <ion-item v-if=\"selectedUser\">\r\n            <ion-label>Email</ion-label>\r\n            <ion-input v-model=\"selectedUser.email\"></ion-input>\r\n          </ion-item>\r\n          <ion-item v-if=\"selectedUser\">\r\n            <ion-label>Role</ion-label>\r\n            <ion-select v-model=\"selectedUser.role\">\r\n              <ion-select-option value=\"admin\">Admin</ion-select-option>\r\n              <ion-select-option value=\"siswa\">Siswa</ion-select-option>\r\n              <ion-select-option value=\"guru\">Guru</ion-select-option>\r\n            </ion-select>\r\n          </ion-item>\r\n          <ion-button expand=\"block\" @click=\"saveUser\">Simpan</ion-button>\r\n        </ion-content>\r\n      </ion-modal>\r\n    </ion-content>\r\n  </ion-page>\r\n</template>\r\n<script setup>\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonBackButton,\r\n  IonContent,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonInput,\r\n  IonButton,\r\n  IonList,\r\n  IonToast,\r\n  IonCol,\r\n  IonRow,\r\n  IonGrid,\r\n  IonModal,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonButtons,\r\n} from \"@ionic/vue\";\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  limit,\r\n  startAfter,\r\n  updateDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\nimport { firebaseApp } from \"../firebase.js\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst auth = getAuth(firebaseApp);\r\nconst db = getFirestore(firebaseApp);\r\n\r\nconst users = ref([]);\r\nconst searchQuery = ref(\"\");\r\nconst toast = ref({\r\n  isOpen: false,\r\n  message: \"\",\r\n  duration: 2000,\r\n  color: \"success\",\r\n});\r\nconst usersPerPage = ref(10);\r\nconst lastVisible = ref(null);\r\nconst showLoadMore = ref(false);\r\nconst isModalOpen = ref(false);\r\nconst selectedUser = ref({}); // Inisialisasi dengan objek kosong\r\n\r\nconst filteredUsers = computed(() => {\r\n  return users.value\r\n    .filter((user) =>\r\n      user.fullName.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n    )\r\n    .slice(0, usersPerPage.value);\r\n});\r\n\r\nconst fetchUsers = async (reset = false) => {\r\n  let q;\r\n  if (reset) {\r\n    q = query(\r\n      collection(db, \"users\"),\r\n      where(\"fullName\", \">=\", searchQuery.value),\r\n      where(\"fullName\", \"<=\", searchQuery.value + \"\\uf8ff\"),\r\n      limit(usersPerPage.value)\r\n    );\r\n  } else {\r\n    q = query(\r\n      collection(db, \"users\"),\r\n      where(\"fullName\", \">=\", searchQuery.value),\r\n      where(\"fullName\", \"<=\", searchQuery.value + \"\\uf8ff\"),\r\n      startAfter(lastVisible.value),\r\n      limit(usersPerPage.value)\r\n    );\r\n  }\r\n\r\n  try {\r\n    const querySnapshot = await getDocs(q);\r\n    const newUsers = querySnapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n    }));\r\n\r\n    if (reset) {\r\n      users.value = newUsers;\r\n    } else {\r\n      users.value.push(...newUsers);\r\n    }\r\n\r\n    lastVisible.value = querySnapshot.docs[querySnapshot.docs.length - 1];\r\n    showLoadMore.value = querySnapshot.docs.length === usersPerPage.value;\r\n\r\n    console.log(\"Data pengguna berhasil diambil:\", users.value);\r\n  } catch (error) {\r\n    console.error(\"Error fetching user data:\", error);\r\n    showToast(\"Terjadi kesalahan saat mengambil data pengguna\", \"danger\");\r\n  }\r\n};\r\n\r\nconst filterUsers = () => {\r\n  fetchUsers(true);\r\n};\r\n\r\nconst loadMore = () => {\r\n  fetchUsers();\r\n};\r\n\r\nconst doRefresh = (event) => {\r\n  setTimeout(() => {\r\n    fetchUsers(true);\r\n    event.target.complete();\r\n  }, 2000);\r\n};\r\n\r\nconst showToast = (message, color) => {\r\n  toast.value = {\r\n    isOpen: true,\r\n    message: message,\r\n    duration: 2000,\r\n    color: color,\r\n  };\r\n};\r\n\r\nconst exportToExcel = () => {\r\n  const exportData = users.value.map((user) => ({\r\n    fullName: user.fullName,\r\n    username: user.username,\r\n    email: user.email,\r\n    role: user.role,\r\n    qrCode: user.qrCode,\r\n    status: user.status,\r\n  }));\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Pengguna\");\r\n  XLSX.writeFile(workbook, \"daftar_pengguna.xlsx\");\r\n  showToast(\"Data pengguna berhasil diekspor\", \"success\");\r\n};\r\n\r\nconst editUser = (user) => {\r\n  selectedUser.value = { ...user };\r\n  isModalOpen.value = true;\r\n};\r\n\r\nconst saveUser = async () => {\r\n  try {\r\n    await updateDoc(\r\n      doc(db, \"users\", selectedUser.value.id),\r\n      selectedUser.value\r\n    );\r\n    showToast(\"Data pengguna berhasil diperbarui\", \"success\");\r\n    fetchUsers(true);\r\n    closeModal();\r\n  } catch (error) {\r\n    console.error(\"Error updating user data:\", error);\r\n    showToast(\"Terjadi kesalahan saat memperbarui data pengguna\", \"danger\");\r\n  }\r\n};\r\n\r\nconst changeStatus = async (user) => {\r\n  try {\r\n    const newStatus = user.status === \"aktif\" ? \"nonaktif\" : \"aktif\";\r\n    await updateDoc(doc(db, \"users\", user.id), { status: newStatus });\r\n    showToast(\r\n      `Status pengguna berhasil diubah menjadi ${newStatus}`,\r\n      \"success\"\r\n    );\r\n    fetchUsers(true);\r\n  } catch (error) {\r\n    console.error(\"Error updating user status:\", error);\r\n    showToast(\"Terjadi kesalahan saat mengubah status pengguna\", \"danger\");\r\n  }\r\n};\r\n\r\nconst closeModal = () => {\r\n  isModalOpen.value = false;\r\n  selectedUser.value = {};\r\n};\r\n\r\nonMounted(() => {\r\n  onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n      fetchUsers(true);\r\n    } else {\r\n      console.error(\"User not authenticated\");\r\n      showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    }\r\n  });\r\n});\r\n</script>\r\n\r\n<style>\r\n/* Custom styling if needed */\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\nth,\r\ntd {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n  text-align: left;\r\n}\r\n\r\ntbody tr:nth-child(even) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\ntbody tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n</style>\r\n","import script from \"./HalamanPengguna.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./HalamanPengguna.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./HalamanPengguna.vue?vue&type=style&index=0&id=4ba9e0bc&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}"],"names":["wellKnownSymbol","MATCH","module","exports","METHOD_NAME","regexp","error1","error2","isObject","classof","it","isRegExp","undefined","$TypeError","TypeError","$","$includes","fails","addToUnscopables","BROKEN_ON_SPARSE","Array","includes","target","proto","forced","el","this","arguments","length","uncurryThis","notARegExp","requireObjectCoercible","toString","correctIsRegExpLogic","stringIndexOf","indexOf","searchString","auth","getAuth","firebaseApp","db","getFirestore","users","ref","searchQuery","toast","isOpen","message","duration","color","usersPerPage","lastVisible","showLoadMore","isModalOpen","selectedUser","filteredUsers","computed","value","filter","user","fullName","toLowerCase","slice","fetchUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reset","q","querySnapshot","newUsers","_users$value","_args","wrap","_context","prev","next","query","collection","where","limit","startAfter","getDocs","sent","docs","map","doc","_objectSpread","id","data","push","apply","_toConsumableArray","console","log","t0","error","showToast","stop","filterUsers","loadMore","doRefresh","event","setTimeout","complete","exportToExcel","exportData","username","email","role","qrCode","status","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","editUser","saveUser","_ref2","_callee2","_context2","updateDoc","closeModal","changeStatus","_ref3","_callee3","newStatus","_context3","concat","_x","onMounted","onAuthStateChanged","__exports__","_arrayWithoutHoles","arr","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread"],"sourceRoot":""}