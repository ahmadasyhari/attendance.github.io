{"version":3,"file":"js/952.15d7c3bf.js","mappings":"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","sources":["webpack://resep-bunda/./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://resep-bunda/./node_modules/core-js/internals/is-regexp.js","webpack://resep-bunda/./node_modules/core-js/internals/not-a-regexp.js","webpack://resep-bunda/./node_modules/core-js/modules/es.array.includes.js","webpack://resep-bunda/./node_modules/core-js/modules/es.string.includes.js","webpack://resep-bunda/./src/views/admin/LaporanIzin.vue","webpack://resep-bunda/./src/views/admin/LaporanIzin.vue?53de","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://resep-bunda/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"],"sourcesContent":["'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');\n};\n","'use strict';\nvar isRegExp = require('../internals/is-regexp');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw $TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar fails = require('../internals/fails');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// FF99+ bug\nvar BROKEN_ON_SPARSE = fails(function () {\n  // eslint-disable-next-line es/no-array-prototype-includes -- detection\n  return !Array(1).includes();\n});\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n","<template>\r\n  <ion-page>\r\n    <ion-header mode=\"ios\">\r\n      <ion-toolbar>\r\n        <ion-title>Informasi Pengajuan Izin</ion-title>\r\n        <ion-back-button slot=\"start\" default-href=\"/\" />\r\n      </ion-toolbar>\r\n    </ion-header>\r\n    <ion-content :fullscreen=\"true\">\r\n      <ion-refresher slot=\"fixed\" @ionRefresh=\"doRefresh($event)\">\r\n        <ion-refresher-content />\r\n      </ion-refresher>\r\n      <ion-content class=\"ion-padding\">\r\n        <ion-item>\r\n          <ion-label>Search by Name</ion-label>\r\n          <ion-input\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"Enter name to search\"\r\n          ></ion-input>\r\n        </ion-item>\r\n        <ion-item>\r\n          <ion-label>Bulan</ion-label>\r\n          <ion-select v-model=\"selectedMonth\" placeholder=\"Pilih Bulan\">\r\n            <ion-select-option\r\n              v-for=\"month in months\"\r\n              :key=\"month.value\"\r\n              :value=\"month.value\"\r\n              >{{ month.label }}</ion-select-option\r\n            >\r\n          </ion-select>\r\n        </ion-item>\r\n        <ion-button expand=\"block\" @click=\"filterIzin\">Search</ion-button>\r\n        <ion-grid>\r\n          <ion-row>\r\n            <ion-col>\r\n              <h2>Daftar Pengajuan Izin</h2>\r\n              <ion-list>\r\n                <ion-item v-for=\"izin in filteredIzin\" :key=\"izin.id\">\r\n                  <ion-label>\r\n                    <h3>{{ izin.fullName }} - {{ izin.role }}</h3>\r\n                    <p>Status: {{ izin.izinStatus }}</p>\r\n                    <p>Durasi: {{ izin.durasi }} hari</p>\r\n                    <p>Keterangan: {{ izin.keterangan }}</p>\r\n                    <p>Dari: {{ formatDate(izin.startDate) }}</p>\r\n                    <p>Sampai: {{ formatDate(izin.endDate) }}</p>\r\n                    <p>Status Admin: {{ izin.status }}</p>\r\n                    <p>Keterangan Admin: {{ izin.keteranganStatus }}</p>\r\n                  </ion-label>\r\n                  <ion-button\r\n                    color=\"success\"\r\n                    @click=\"openModal(izin.id, 'disetujui')\"\r\n                    >Setujui</ion-button\r\n                  >\r\n                  <ion-button\r\n                    color=\"danger\"\r\n                    @click=\"openModal(izin.id, 'ditolak')\"\r\n                    >Tolak</ion-button\r\n                  >\r\n                </ion-item>\r\n              </ion-list>\r\n              <ion-button expand=\"block\" @click=\"loadMore\" v-if=\"showLoadMore\"\r\n                >Load More</ion-button\r\n              >\r\n            </ion-col>\r\n          </ion-row>\r\n        </ion-grid>\r\n        <ion-button expand=\"block\" @click=\"exportFilteredToExcel\"\r\n          >Export Laporan Sakit</ion-button\r\n        >\r\n      </ion-content>\r\n\r\n      <ion-toast\r\n        :is-open=\"toast.isOpen\"\r\n        :message=\"toast.message\"\r\n        :duration=\"toast.duration\"\r\n        :color=\"toast.color\"\r\n        @did-dismiss=\"() => (toast.isOpen = false)\"\r\n      ></ion-toast>\r\n\r\n      <ion-modal :is-open=\"isModalOpen\" @did-dismiss=\"closeModal\">\r\n        <ion-header>\r\n          <ion-toolbar>\r\n            <ion-title>Ubah Status Izin</ion-title>\r\n            <ion-buttons slot=\"end\">\r\n              <ion-button @click=\"closeModal\">Close</ion-button>\r\n            </ion-buttons>\r\n          </ion-toolbar>\r\n        </ion-header>\r\n        <ion-content>\r\n          <ion-item>\r\n            <ion-label>Keterangan</ion-label>\r\n            <ion-textarea\r\n              v-model=\"keteranganStatus\"\r\n              placeholder=\"Masukkan keterangan\"\r\n            ></ion-textarea>\r\n          </ion-item>\r\n          <ion-button expand=\"block\" @click=\"ubahStatus\">Simpan</ion-button>\r\n        </ion-content>\r\n      </ion-modal>\r\n    </ion-content>\r\n  </ion-page>\r\n</template>\r\n<script setup>\r\nimport {\r\n  IonPage,\r\n  IonHeader,\r\n  IonToolbar,\r\n  IonTitle,\r\n  IonBackButton,\r\n  IonContent,\r\n  IonRefresher,\r\n  IonRefresherContent,\r\n  IonItem,\r\n  IonLabel,\r\n  IonSelect,\r\n  IonSelectOption,\r\n  IonInput,\r\n  IonTextarea,\r\n  IonButton,\r\n  IonList,\r\n  IonToast,\r\n  IonCol,\r\n  IonRow,\r\n  IonGrid,\r\n  IonModal,\r\n  IonButtons,\r\n} from \"@ionic/vue\";\r\nimport { ref, onMounted, computed } from \"vue\";\r\nimport { getAuth, onAuthStateChanged } from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  updateDoc,\r\n  getDocs,\r\n  collection,\r\n  query,\r\n  where,\r\n  limit,\r\n  startAfter,\r\n} from \"firebase/firestore\";\r\nimport { firebaseApp } from \"../firebase.js\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst auth = getAuth(firebaseApp);\r\nconst db = getFirestore(firebaseApp);\r\n\r\nconst daftarIzin = ref([]);\r\nconst toast = ref({\r\n  isOpen: false,\r\n  message: \"\",\r\n  duration: 2000,\r\n  color: \"success\",\r\n});\r\nconst isModalOpen = ref(false);\r\nconst keteranganStatus = ref(\"\");\r\nconst selectedIzinId = ref(\"\");\r\nconst selectedStatus = ref(\"\");\r\nconst searchQuery = ref(\"\");\r\nconst izinPerPage = ref(10);\r\nconst lastVisible = ref(null);\r\nconst showLoadMore = ref(false);\r\nconst selectedMonth = ref(\"\");\r\nconst months = [\r\n  { value: 0, label: \"January\" },\r\n  { value: 1, label: \"February\" },\r\n  { value: 2, label: \"March\" },\r\n  { value: 3, label: \"April\" },\r\n  { value: 4, label: \"May\" },\r\n  { value: 5, label: \"June\" },\r\n  { value: 6, label: \"July\" },\r\n  { value: 7, label: \"August\" },\r\n  { value: 8, label: \"September\" },\r\n  { value: 9, label: \"October\" },\r\n  { value: 10, label: \"November\" },\r\n  { value: 11, label: \"December\" },\r\n];\r\n\r\nconst filteredIzin = computed(() => {\r\n  return daftarIzin.value\r\n    .filter((izin) => {\r\n      const fullNameMatches = izin.fullName\r\n        .toLowerCase()\r\n        .includes(searchQuery.value.toLowerCase());\r\n      const izinMonth = izin.startDate\r\n        ? izin.startDate.toDate().getMonth()\r\n        : null;\r\n      const monthMatches =\r\n        selectedMonth.value === \"\" || izinMonth === selectedMonth.value;\r\n\r\n      return fullNameMatches && monthMatches;\r\n    })\r\n    .slice(0, izinPerPage.value);\r\n});\r\n\r\nconst fetchIzinData = async (reset = false) => {\r\n  let q;\r\n  if (reset) {\r\n    q = query(\r\n      collection(db, \"izin\"),\r\n      where(\"fullName\", \">=\", searchQuery.value),\r\n      where(\"fullName\", \"<=\", searchQuery.value + \"\\uf8ff\"),\r\n      limit(izinPerPage.value)\r\n    );\r\n  } else {\r\n    q = query(\r\n      collection(db, \"izin\"),\r\n      where(\"fullName\", \">=\", searchQuery.value),\r\n      where(\"fullName\", \"<=\", searchQuery.value + \"\\uf8ff\"),\r\n      startAfter(lastVisible.value),\r\n      limit(izinPerPage.value)\r\n    );\r\n  }\r\n\r\n  try {\r\n    const querySnapshot = await getDocs(q);\r\n    const newIzin = querySnapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      startDate: doc.data().startDate,\r\n      endDate: doc.data().endDate,\r\n    }));\r\n\r\n    if (reset) {\r\n      daftarIzin.value = newIzin;\r\n    } else {\r\n      daftarIzin.value.push(...newIzin);\r\n    }\r\n\r\n    lastVisible.value = querySnapshot.docs[querySnapshot.docs.length - 1];\r\n    showLoadMore.value = querySnapshot.docs.length === izinPerPage.value;\r\n\r\n    console.log(\"Data izin berhasil diambil:\", daftarIzin.value);\r\n  } catch (error) {\r\n    console.error(\"Error fetching izin data:\", error);\r\n    showToast(\"Terjadi kesalahan saat mengambil data izin\", \"danger\");\r\n  }\r\n};\r\n\r\nconst filterIzin = () => {\r\n  fetchIzinData(true);\r\n};\r\n\r\nconst loadMore = () => {\r\n  fetchIzinData();\r\n};\r\n\r\nconst openModal = (izinId, status) => {\r\n  selectedIzinId.value = izinId;\r\n  selectedStatus.value = status;\r\n  isModalOpen.value = true;\r\n};\r\n\r\nconst closeModal = () => {\r\n  isModalOpen.value = false;\r\n  keteranganStatus.value = \"\";\r\n  selectedIzinId.value = \"\";\r\n  selectedStatus.value = \"\";\r\n};\r\n\r\nconst ubahStatus = async () => {\r\n  try {\r\n    await updateDoc(doc(db, \"izin\", selectedIzinId.value), {\r\n      status: selectedStatus.value,\r\n      keteranganStatus: keteranganStatus.value,\r\n    });\r\n    showToast(\r\n      `Status pengajuan izin berhasil diubah menjadi ${selectedStatus.value}`,\r\n      \"success\"\r\n    );\r\n    fetchIzinData(true); // Refresh the izin data after updating status\r\n    closeModal(); // Close the modal after saving\r\n  } catch (error) {\r\n    console.error(\"Error updating izin status:\", error);\r\n    showToast(\"Terjadi kesalahan saat mengubah status izin\", \"danger\");\r\n  }\r\n};\r\n\r\nconst doRefresh = (event) => {\r\n  setTimeout(() => {\r\n    fetchIzinData(true);\r\n    event.target.complete();\r\n  }, 2000);\r\n};\r\n\r\nconst showToast = (message, color) => {\r\n  toast.value = {\r\n    isOpen: true,\r\n    message: message,\r\n    duration: 2000,\r\n    color: color,\r\n  };\r\n};\r\n\r\nconst formatDate = (timestamp) => {\r\n  if (!timestamp) return \"N/A\";\r\n  const date = timestamp.toDate();\r\n  const day = date.getDate().toString().padStart(2, \"0\");\r\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n  const year = date.getFullYear();\r\n  return `${day}/${month}/${year}`;\r\n};\r\n\r\nconst exportFilteredToExcel = () => {\r\n  const izinData = filteredIzin.value.filter(\r\n    (izin) => izin.izinStatus === \"sakit\" || izin.izinStatus === \"izin\"\r\n  );\r\n\r\n  if (izinData.length === 0) {\r\n    showToast(\r\n      \"Tidak ada data izin atau sakit untuk bulan yang dipilih\",\r\n      \"warning\"\r\n    );\r\n    return;\r\n  }\r\n\r\n  const exportData = izinData.map((izin) => ({\r\n    fullName: izin.fullName,\r\n    role: izin.role,\r\n    izinStatus: izin.izinStatus,\r\n    durasi: izin.durasi,\r\n    keterangan: izin.keterangan,\r\n    fromDate: formatDate(izin.startDate),\r\n    toDate: formatDate(izin.endDate),\r\n    status: izin.status,\r\n    keteranganStatus: izin.keteranganStatus,\r\n  }));\r\n\r\n  const worksheet = XLSX.utils.json_to_sheet(exportData);\r\n  const workbook = XLSX.utils.book_new();\r\n  XLSX.utils.book_append_sheet(workbook, worksheet, \"Laporan Izin dan Sakit\");\r\n  XLSX.writeFile(workbook, \"laporan_izin_dan_sakit.xlsx\");\r\n  showToast(\"Laporan izin dan sakit berhasil diekspor\", \"success\");\r\n};\r\n\r\nonMounted(() => {\r\n  onAuthStateChanged(auth, (user) => {\r\n    if (user) {\r\n      fetchIzinData(true);\r\n    } else {\r\n      console.error(\"User not authenticated\");\r\n      showToast(\"Pengguna tidak terautentikasi\", \"danger\");\r\n    }\r\n  });\r\n});\r\n</script>\r\n\r\n<style>\r\n/* Custom styling if needed */\r\n</style>\r\n","import script from \"./LaporanIzin.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LaporanIzin.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LaporanIzin.vue?vue&type=style&index=0&id=1f57ec42&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}"],"names":["wellKnownSymbol","MATCH","module","exports","METHOD_NAME","regexp","error1","error2","isObject","classof","it","isRegExp","undefined","$TypeError","TypeError","$","$includes","fails","addToUnscopables","BROKEN_ON_SPARSE","Array","includes","target","proto","forced","el","this","arguments","length","uncurryThis","notARegExp","requireObjectCoercible","toString","correctIsRegExpLogic","stringIndexOf","indexOf","searchString","auth","getAuth","firebaseApp","db","getFirestore","daftarIzin","ref","toast","isOpen","message","duration","color","isModalOpen","keteranganStatus","selectedIzinId","selectedStatus","searchQuery","izinPerPage","lastVisible","showLoadMore","selectedMonth","months","value","label","filteredIzin","computed","filter","izin","fullNameMatches","fullName","toLowerCase","izinMonth","startDate","toDate","getMonth","monthMatches","slice","fetchIzinData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","reset","q","querySnapshot","newIzin","_daftarIzin$value","_args","wrap","_context","prev","next","query","collection","where","limit","startAfter","getDocs","sent","docs","map","doc","_objectSpread","id","data","endDate","push","apply","_toConsumableArray","console","log","t0","error","showToast","stop","filterIzin","loadMore","openModal","izinId","status","closeModal","ubahStatus","_ref2","_callee2","_context2","updateDoc","concat","doRefresh","event","setTimeout","complete","formatDate","timestamp","date","day","getDate","padStart","month","year","getFullYear","exportFilteredToExcel","izinData","izinStatus","exportData","role","durasi","keterangan","fromDate","worksheet","XLSX","json_to_sheet","workbook","book_new","book_append_sheet","onMounted","onAuthStateChanged","user","__exports__","_arrayWithoutHoles","arr","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread"],"sourceRoot":""}