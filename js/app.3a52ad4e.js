(()=>{var e={1993:e=>{function n(e){return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=()=>[],n.resolve=n,n.id=1993,e.exports=n},2840:(e,n,t)=>{"use strict";t.d(n,{Z:()=>p});var a=t(124),r=t(8534),u=t(1661),i=t(5137);function s(e,n){return o.apply(this,arguments)}function o(){return o=(0,r.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Cl.create({cssClass:"my-custom-class",mode:"ios",header:n,message:t,buttons:["OK"]});case 2:return r=e.sent,e.next=5,r.present();case 5:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(e,n){return c.apply(this,arguments)}function c(){return c=(0,r.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Mn.create({message:n,duration:2e3,color:t,position:"top"});case 2:r=e.sent,r.present();case 4:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=(0,r.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Cl.create({cssClass:"my-custom-class",header:"Confirm!",message:"<strong>Confirm to Exit App??</strong>",mode:"ios",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",id:"cancel-button",handler:function(){console.log("Confirm Cancel")}},{text:"Confirm",id:"confirm-button",handler:function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.g.exitApp();case 1:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}]});case 2:n=e.sent,n.present();case 4:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}const p={alertV:s,toastV:l,confirmExit:d}},5366:(e,n,t)=>{"use strict";t(6992),t(8674),t(9601),t(7727);var a=t(9963),r=t(6252),u=t(2262),i=t(1661);const s={__name:"App",setup:function(e){return function(e,n){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.dr),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.jP))]})),_:1})}}},o=s,l=o;var c=t(124),d=t(8534),f=(t(1539),t(8783),t(3948),t(1089)),p=t(316),m=t(6100),v=(t(7658),t(8903)),k=t(2201);const g={__name:"TabsPage",setup:function(e){var n=(0,p.v0)(),t=(0,k.tv)(),s=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.Cl.create({cssClass:"my-custom-class",header:"Confirm!",mode:"ios",message:"Confirm Logout?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){console.log("Confirm Cancel")}},{text:"Logout",handler:function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.w7)(n);case 3:console.log("Logged out successfully"),localStorage.clear(),sessionStorage.clear(),t.push({name:"login"}).then((function(){t.go(0)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Logout error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));function a(){return e.apply(this,arguments)}return a}()}]});case 2:return a=e.sent,e.next=5,a.present();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,n){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.UN),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.jP)),(0,r.Wm)((0,u.SU)(i.yq),{slot:"bottom",id:"app-tab-bar"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.ZU),{tab:"home",href:"/page/home"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.gu),{icon:(0,u.SU)(v.GIQ)},null,8,["icon"]),(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Menu")]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.ZU),{tab:"logout",onClick:n[0]||(n[0]=(0,a.iM)((function(e){return s()}),["prevent"]))},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.gu),{icon:(0,u.SU)(v.JFt)},null,8,["icon"]),(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Logout")]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}}};var h=t(3744);const w=(0,h.Z)(g,[["__scopeId","data-v-6f9fd1d7"]]),b=w;t(8309),t(2564);var U=t(3577);const _=t.p+"img/unib.fcbc2a1a.png";var x=t(2840),S=(0,r._)("div",{class:"header-register"},null,-1),y=(0,r._)("div",{class:"top-radius"},null,-1),W={class:"content-register",style:{padding:"20px"}},Z=(0,r._)("h1",{style:{margin:"0","margin-bottom":"5px"}},"Selamat Datang!",-1),D=(0,r._)("p",{style:{margin:"0"}},"Silakan daftar akun baru",-1),I={class:"input-group"},A=(0,r._)("div",{class:"label"},[(0,r._)("h2",null,"Nama Lengkap"),(0,r._)("span",null,"*")],-1),M={class:"input ion-activatable ripple-parent"},z=(0,r._)("div",{class:"label"},[(0,r._)("h2",null,"Username (Gunakan Email Aktif)"),(0,r._)("span",null,"*")],-1),C={class:"input ion-activatable ripple-parent"},N=(0,r._)("div",{class:"label"},[(0,r._)("h2",null,"Password"),(0,r._)("span",null,"*")],-1),j={class:"input ion-activatable ripple-parent"},H=(0,r._)("div",{class:"label"},[(0,r._)("h2",null,"Role"),(0,r._)("span",null,"*")],-1),P={class:"input ion-activatable ripple-parent"},T={key:0,class:"ion-text-center",style:{margin:"0",color:"var(--ion-color-danger)"}},O=(0,r._)("span",{style:{"font-size":"1.5rem",color:"white"}}," Daftar",-1),L=(0,r._)("span",{style:{"font-size":"1.2rem",color:"white"}}," Kembali ke Login",-1),E=(0,r._)("p",{class:"bp"},[(0,r.Uk)(" Â© 2024 Universitas Bengkulu "),(0,r._)("img",{src:_,alt:"",style:{width:"15px",height:"15px"}})],-1);const J={__name:"RegisterPage",setup:function(e){var n=(0,u.iH)(!1),t=(0,u.iH)(""),s=(0,u.iH)(""),o=(0,u.iH)(""),l=(0,u.iH)("password"),f=(0,u.iH)(""),g=(0,u.iH)(""),h=(0,u.iH)(!1),w=(0,k.tv)(),b=(0,p.v0)(),_=(0,m.ad)();(0,i.Kx)(-1,(function(){"login"==w.currentRoute.value.name&&x.Z.confirmExit()}));var J=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(h.value=!1,t.value){e.next=6;break}h.value=!0,g.value="Nama lengkap tidak boleh kosong",e.next=42;break;case 6:if(s.value){e.next=11;break}h.value=!0,g.value="Username tidak boleh kosong",e.next=42;break;case 11:if(o.value){e.next=16;break}h.value=!0,g.value="Password tidak boleh kosong",e.next=42;break;case 16:if(f.value){e.next=21;break}h.value=!0,g.value="Role tidak boleh kosong",e.next=42;break;case 21:return n.value=!0,e.prev=22,e.next=25,(0,p.Xb)(b,s.value,o.value);case 25:return a=e.sent,r=a.user,e.next=29,(0,p.ck)(r,{displayName:t.value});case 29:return e.next=31,(0,m.pl)((0,m.JU)(_,"users",r.uid),{fullName:t.value,username:s.value,email:r.email,role:f.value,status:"non-aktif"});case 31:n.value=!1,h.value=!1,w.push({name:"splash"}),setTimeout((function(){t.value="",s.value="",o.value="",f.value=""}),1e3),e.next=42;break;case 37:e.prev=37,e.t0=e["catch"](22),n.value=!1,h.value=!0,g.value=e.t0.message;case 42:case"end":return e.stop()}}),e,null,[[22,37]])})));return function(){return e.apply(this,arguments)}}(),K=function(e){l.value=e};return function(e,c){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.W2),{class:"register","scroll-y":"true"},{default:(0,r.w5)((function(){return[S,y,(0,r._)("div",W,[Z,D,(0,r._)("div",I,[A,(0,r._)("div",M,[(0,r.Wm)((0,u.SU)(i.gu),{class:"start",icon:(0,u.SU)(v.lBs),color:"primary"},null,8,["icon"]),(0,r.Wm)((0,u.SU)(i.pK),{class:"fullName",type:"text",placeholder:"Contoh: John Doe",modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=function(e){return t.value=e})},null,8,["modelValue"]),(0,r.Wm)((0,u.SU)(i.H$),{mode:"ios"})]),z,(0,r._)("div",C,[(0,r.Wm)((0,u.SU)(i.gu),{class:"start",icon:(0,u.SU)(v.X5o),color:"primary"},null,8,["icon"]),(0,r.Wm)((0,u.SU)(i.pK),{class:"username",type:"text",placeholder:"Contoh: siswa@gmail.com",modelValue:s.value,"onUpdate:modelValue":c[1]||(c[1]=function(e){return s.value=e})},null,8,["modelValue"]),(0,r.Wm)((0,u.SU)(i.H$),{mode:"ios"})]),N,(0,r._)("div",j,[(0,r.Wm)((0,u.SU)(i.gu),{class:"start",icon:(0,u.SU)(v.Ml6),color:"primary"},null,8,["icon"]),(0,r.Wm)((0,u.SU)(i.pK),{class:"password",onKeyup:(0,a.D2)(J,["enter"]),type:l.value,placeholder:"Contoh: password123*",modelValue:o.value,"onUpdate:modelValue":c[2]||(c[2]=function(e){return o.value=e})},null,8,["onKeyup","type","modelValue"]),(0,r.Wm)((0,u.SU)(i.H$),{mode:"ios"}),"password"==l.value?((0,r.wg)(),(0,r.j4)((0,u.SU)(i.gu),{key:0,class:"end",color:"primary",icon:(0,u.SU)(v.hII),onClick:c[3]||(c[3]=(0,a.iM)((function(e){return K("text")}),["prevent"]))},null,8,["icon"])):((0,r.wg)(),(0,r.j4)((0,u.SU)(i.gu),{key:1,class:"end",color:"primary",icon:(0,u.SU)(v.qRO),onClick:c[4]||(c[4]=(0,a.iM)((function(e){return K("password")}),["prevent"]))},null,8,["icon"]))]),H,(0,r._)("div",P,[(0,r.Wm)((0,u.SU)(i.t9),{modelValue:f.value,"onUpdate:modelValue":c[5]||(c[5]=function(e){return f.value=e}),placeholder:"Pilih Role"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.n0),{value:"guru"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Guru")]})),_:1}),(0,r.Wm)((0,u.SU)(i.n0),{value:"siswa"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Siswa")]})),_:1}),(0,r.Wm)((0,u.SU)(i.n0),{value:"petugas"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Staf")]})),_:1}),(0,r.Wm)((0,u.SU)(i.n0),{value:"orangtua"},{default:(0,r.w5)((function(){return[(0,r.Uk)("OrangTuan")]})),_:1})]})),_:1},8,["modelValue"])])]),h.value?((0,r.wg)(),(0,r.iD)("h5",T,(0,U.zw)(g.value),1)):(0,r.kq)("",!0),(0,r.Wm)((0,u.SU)(i.YG),{mode:"ios",class:"register",onClick:(0,a.iM)(J,["prevent"]),expand:"block"},{default:(0,r.w5)((function(){return[O]})),_:1},8,["onClick"]),(0,r.Wm)((0,u.SU)(i.YG),{mode:"ios",class:"back-to-login",onClick:c[6]||(c[6]=function(n){return e.$router.push({name:"login"})}),expand:"block"},{default:(0,r.w5)((function(){return[L]})),_:1}),E]),(0,r.Wm)((0,u.SU)(i.wh),{mode:"ios","is-open":n.value,message:"Mohon tunggu...",spinner:"crescent"},null,8,["is-open"])]})),_:1})]})),_:1})}}},K=J,Q=K;var G=t(6347),Y=t(3144),R=(t(1249),t(7042),t(2222),t(4678),t(3710),t(5856)),B=t(4105),q=(0,r._)("h1",{style:{color:"#03346e","font-weight":"bold"}},"Menu",-1),V=(0,r._)("p",{style:{color:"#fff"}},"Tambah Kelas",-1),$=(0,r._)("p",{style:{color:"#fff"}},"Tambah Mata Pelajaran",-1),F=(0,r._)("p",{style:{color:"#fff"}},"Laporan Kehadiaran",-1),X=(0,r._)("p",{style:{color:"#fff"}},"Lap Izin",-1),ee=(0,r._)("p",{style:{color:"#fff"}},"Pengguna",-1),ne=(0,r._)("p",{style:{color:"#fff"}},"Setting",-1),te=(0,r._)("h1",{style:{color:"#03346e","font-weight":"bold"}},"Data Pengguna",-1),ae=(0,r._)("h1",{style:{color:"#03346e","font-weight":"bold"}},"Input Titik Koordinat",-1),re=(0,r._)("h1",{style:{color:"#03346e","font-weight":"bold"}},"Laporan Absensi",-1),ue=10,ie=10;const se={__name:"AdminPage",setup:function(e){var n=(0,m.ad)(R.H),t=(0,u.iH)([]),s=(0,u.iH)([]),o=(0,u.iH)(""),l=(0,u.iH)(""),f=(0,u.iH)(!1),p=(0,k.tv)(),g=function(e){p.push({name:e})},h=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),w=(0,u.iH)(1),b=(0,u.iH)(1),_=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.PL)((0,m.hJ)(n,"users"));case 3:a=e.sent,t.value=a.docs.map((function(e){return(0,Y.Z)({id:e.id},e.data())})),console.log("Users fetched:",t.value),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error fetching users:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),x=(0,r.Fl)((function(){return t.value.slice(0,w.value*ue)})),S=(0,r.Fl)((function(){return w.value*ue<t.value.length})),y=function(){w.value++},W=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var t,a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(n,"settings","coordinates"));case 3:t=e.sent,t.exists()&&(a=t.data(),o.value=a.latitude,l.value=a.longitude,console.log("Coordinates fetched:",a)),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var t,a,r,u,i,o;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.PL)((0,m.hJ)(n,"users"));case 3:t=e.sent,a=t.docs.map((function(e){return(0,Y.Z)({id:e.id},e.data())})),r=[],u=(0,G.Z)(a),e.prev=7,o=(0,c.Z)().mark((function e(){var t,a,u;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.value,a=(0,m.hJ)(n,"attendance",t.id,"records"),e.next=4,(0,m.PL)((0,m.IO)(a,(0,m.Xo)("masuk","desc")));case 4:u=e.sent,r=r.concat(u.docs.map((function(e){var n=e.data();return{id:e.id,userId:t.id,fullName:t.fullName,date:e.id,masuk:n.masuk?n.masuk.toDate().toLocaleString():"Belum absen",keluar:n.keluar?n.keluar.toDate().toLocaleString():"Belum absen",lateTime:j(n.masuk?n.masuk.toDate():null)}})));case 6:case"end":return e.stop()}}),e)})),u.s();case 10:if((i=u.n()).done){e.next=14;break}return e.delegateYield(o(),"t0",12);case 12:e.next=10;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e["catch"](7),u.e(e.t1);case 19:return e.prev=19,u.f(),e.finish(19);case 22:s.value=r,console.log("Attendance records fetched:",s.value),e.next=29;break;case 26:e.prev=26,e.t2=e["catch"](0),console.error("Error fetching attendance records:",e.t2);case 29:case"end":return e.stop()}}),e,null,[[0,26],[7,16,19,22]])})));return function(){return e.apply(this,arguments)}}(),D=(0,r.Fl)((function(){return s.value.slice(0,b.value*ie)})),I=(0,r.Fl)((function(){return b.value*ie<s.value.length})),A=function(){b.value++},M=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,m.JU)(n,"users",t.id),r="non-aktif"===t.status?"aktif":"non-aktif",e.next=5,(0,m.r7)(a,{status:r});case 5:t.status=r,T("Status pengguna berhasil diubah.","success"),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("Error updating user status:",e.t0),T("Terjadi kesalahan saat mengubah status pengguna.","danger");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.pl)((0,m.JU)(n,"settings","coordinates"),{latitude:parseFloat(o.value),longitude:parseFloat(l.value)});case 3:console.log("Coordinates saved"),f.value=!1,T("Koordinat berhasil disimpan.","success"),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error saving coordinates:",e.t0),T("Terjadi kesalahan saat menyimpan koordinat.","danger");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){f.value=!0},N=function(e){if(!e)return!1;var n=new Date(e),t=new Date(n);return t.setHours(8,0,0,0),n>t},j=function(e){if(!e)return"";var n=new Date(e),t=new Date(n);if(t.setHours(8,0,0,0),n>t){var a=Math.floor((n-t)/6e4),r=Math.floor(a/60),u=a%60;return"".concat(r," jam ").concat(u," menit")}return"Tepat Waktu"},H=function(){var e=B.P6.json_to_sheet(t.value),n=B.P6.book_new();B.P6.book_append_sheet(n,e,"Data Pengguna"),B.NC(n,"data_pengguna.xlsx")},P=function(){var e=B.P6.json_to_sheet(s.value),n=B.P6.book_new();B.P6.book_append_sheet(n,e,"Laporan Absensi"),B.NC(n,"laporan_absensi.xlsx")},T=function(e,n){h.value={isOpen:!0,message:e,duration:2e3,color:n}};return(0,r.bv)((function(){_(),W(),Z()})),function(e,n){var t=(0,r.up)("ion-card-header"),s=(0,r.up)("ion-icon"),c=(0,r.up)("ion-card");return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Gu),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.sr),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wd),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Admin Page")]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.W2),{class:"ion-padding"},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[(0,r.Wm)(t,null,{default:(0,r.w5)((function(){return[q]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[0]||(n[0]=(0,a.iM)((function(e){return g("halamankelas")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.hd1),size:"large",style:{color:"#fff"}},null,8,["icon"]),V])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[1]||(n[1]=(0,a.iM)((function(e){return g("halamanmatapelajaran")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.hd1),size:"large",style:{color:"#fff"}},null,8,["icon"]),$])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[2]||(n[2]=(0,a.iM)((function(e){return g("laporankehadiranAdmin")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),F])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[3]||(n[3]=(0,a.iM)((function(e){return g("laporanizinAdmin")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),X])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[4]||(n[4]=(0,a.iM)((function(e){return g("halamanpenggunaAdmin")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.JZY),size:"large",style:{color:"#fff"}},null,8,["icon"]),ee])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[5]||(n[5]=(0,a.iM)((function(e){return g("halamansettingAdmin")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(s,{icon:(0,u.SU)(v.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),ne])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[te,(0,r.Wm)((0,u.SU)(i.jY),{class:"table"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),{class:"table-header"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Nama Lengkap")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Username")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Email")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Status")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Aksi")]})),_:1})]})),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(x.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Nd),{key:e.id,class:"table-row"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.fullName),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.username),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.email),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.status),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.yp),{onClick:function(n){return M(e)},color:"non-aktif"===e.status?"success":"warning",style:{cursor:"pointer"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)("non-aktif"===e.status?"Aktifkan":"Non-aktifkan"),1)]})),_:2},1032,["onClick","color"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),S.value?((0,r.wg)(),(0,r.j4)((0,u.SU)(i.YG),{key:0,onClick:y,color:"warning"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Load More Users")]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)((0,u.SU)(i.YG),{onClick:H,color:"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Export Data Pengguna ke Excel")]})),_:1})]})),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[ae,(0,r.Wm)((0,u.SU)(i.Ie),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),{position:"floating"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Latitude")]})),_:1}),(0,r.Wm)((0,u.SU)(i.pK),{modelValue:o.value,"onUpdate:modelValue":n[6]||(n[6]=function(e){return o.value=e}),type:"number",readonly:!f.value},null,8,["modelValue","readonly"])]})),_:1}),(0,r.Wm)((0,u.SU)(i.Ie),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),{position:"floating"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Longitude")]})),_:1}),(0,r.Wm)((0,u.SU)(i.pK),{modelValue:l.value,"onUpdate:modelValue":n[7]||(n[7]=function(e){return l.value=e}),type:"number",readonly:!f.value},null,8,["modelValue","readonly"])]})),_:1}),(0,r.Wm)((0,u.SU)(i.yp),{onClick:n[8]||(n[8]=function(e){return f.value?z():C()}),color:"success",style:{cursor:"pointer"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(f.value?"Simpan Koordinat":"Edit Koordinat"),1)]})),_:1})]})),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[re,(0,r.Wm)((0,u.SU)(i.jY),{class:"table"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),{class:"table-header"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Nama Lengkap")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Tanggal")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Masuk")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Keluar")]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Keterangan Telat")]})),_:1})]})),_:1}),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(D.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Nd),{key:e.id,class:"table-row"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.fullName),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.date),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.yp),{color:N(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.masuk?e.masuk:"Belum absen"),1)]})),_:2},1032,["color"])]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.keluar?e.keluar:"Belum absen"),1)]})),_:2},1024),(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(j(e.masuk)),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),I.value?((0,r.wg)(),(0,r.j4)((0,u.SU)(i.YG),{key:0,onClick:A,color:"primary"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Load More Attendance Records")]})),_:1})):(0,r.kq)("",!0),(0,r.Wm)((0,u.SU)(i.YG),{onClick:P,color:"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Export Laporan Absensi ke Excel")]})),_:1}),(0,r.Wm)((0,u.SU)(i.Px),{"is-open":h.value.isOpen,message:h.value.message,duration:h.value.duration,color:h.value.color,onDidDismiss:n[9]||(n[9]=function(e){return h.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})]})),_:1})}}},oe=se,le=oe;t(8733),t(9826),t(6647),t(9714),t(3112),t(3843);function ce(e){var n=new Date(e),t=new Array("Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"),a=String(n.getDate()).padStart(2,"0"),r=n.getFullYear(),u=t[n.getMonth()];return a+" "+u+" "+r}var de={class:"main_content_div"},fe=(0,r._)("div",{class:"user_div"},[(0,r._)("h2")],-1),pe=(0,r._)("div",{class:"top-radius"},null,-1),me={class:"content_div"},ve={class:"card-heading ion-padding"},ke=(0,r._)("br",null,null,-1),ge={class:"absen-buttons"},he=(0,r._)("br",null,null,-1),we=(0,r._)("p",{style:{color:"#fff"}},"Tambah Soal",-1),be=(0,r._)("p",{style:{color:"#fff"}},"Tambah Materi",-1),Ue=(0,r._)("p",{style:{color:"#fff"}},"Buat Ujian",-1),_e=(0,r._)("p",{style:{color:"#fff"}},"Lihat Hasil Ujian",-1),xe=(0,r._)("p",{style:{color:"#fff"}},"Settings",-1),Se=(0,r._)("br",null,null,-1),ye={key:0},We={key:1};const Ze={__name:"GuruPage",setup:function(e){var n=(0,k.tv)(),t=(0,u.iH)(""),s=(0,u.iH)(""),o=(0,u.iH)(!0),l=(0,u.iH)("Absen Masuk"),f=(0,u.iH)([]),g=(0,u.iH)([]),h=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),w=(0,u.iH)(null),b=(0,p.v0)(R.H),_=(0,m.ad)(R.H),x=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(_,"users",n));case 3:a=e.sent,a.exists()&&(r=a.data(),t.value=r.fullName,s.value=r.status),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(_,"settings","coordinates"));case 3:n=e.sent,n.exists()&&(w.value=n.data()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,m.hJ)(_,"attendance",n,"records"),a=(0,m.IO)(t,(0,m.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,m.PL)(a);case 5:r=e.sent,f.value=r.docs.map((function(e){return(0,Y.Z)({date:e.id},e.data())})),W(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=new Date,n=e.getDay(),t=new Date(e);t.setDate(e.getDate()-n+(0===n?-6:1));var a=new Date(t);a.setDate(t.getDate()+6),g.value=[];for(var r=function(){var e=u.toISOString().split("T")[0],n=f.value.find((function(n){return n.date===e}));g.value.push(n||{date:e,masuk:null,keluar:null})},u=new Date(t);u<=e;u.setDate(u.getDate()+1))r()},Z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(new Date).toISOString().split("T")[0],a=(0,m.JU)(_,"attendance",n,"records",t),e.prev=2,e.next=5,(0,m.QT)(a);case 5:r=e.sent,r.exists()?r.data().keluar?(o.value=!0,l.value="Absen Masuk"):(o.value=!1,l.value="Absen Keluar"):(o.value=!0,l.value="Absen Masuk"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error checking absen status:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.currentUser,!n){e.next=33;break}if("non-aktif"!==s.value){e.next=5;break}return M("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,z();case 7:if(t=e.sent,t){e.next=11;break}return M("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(_,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,!r.exists()||!r.data().masuk){e.next=19;break}return M("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.pl)(a,{masuk:(0,m.Bt)()},{merge:!0});case 21:console.log("Absen masuk berhasil"),M("Absen masuk berhasil","success"),o.value=!1,l.value="Absen Keluar",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting masuk time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.currentUser,!n){e.next=33;break}if("non-aktif"!==s.value){e.next=5;break}return M("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,z();case 7:if(t=e.sent,t){e.next=11;break}return M("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(_,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,r.exists()&&!r.data().keluar){e.next=19;break}return M("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.r7)(a,{keluar:(0,m.Bt)()});case 21:console.log("Absen keluar berhasil"),M("Absen keluar berhasil","success"),o.value=!0,l.value="Absen Masuk",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting keluar time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o.value){e.next=5;break}return e.next=3,D();case 3:e.next=7;break;case 5:return e.next=7,I();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e,n){h.value={isOpen:!0,message:e,duration:2e3,color:n}},z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var t=n.coords.latitude,a=n.coords.longitude,r=C(t,a,w.value.latitude,w.value.longitude),u=.1;e(r<=u)}),(function(n){console.error("Error getting geolocation:",n),e(!1)})):(console.error("Geolocation is not supported by this browser."),e(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e,n,t,a){var r=function(e){return e*Math.PI/180},u=6371,i=r(t-e),s=r(a-n),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r(e))*Math.cos(r(t))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=u*l;return c},N=function(e){if(!e)return!1;var n=e.toDate(),t=new Date(n);return t.setHours(8,0,0,0),n>t},j=function(e){if(!e)return"0 menit";var n=e.toDate(),t=new Date(n);t.setHours(8,0,0,0);var a=n-t,r=Math.floor(a/36e5),u=Math.floor(a%36e5/6e4);return"".concat(r," jam ").concat(u," menit")},H=function(e){var n=new Date(e),t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],a=t[n.getDay()],r=n.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return"".concat(a,", ").concat(r)};(0,r.bv)((function(){(0,p.Aj)(b,(function(e){e?(x(e.uid),S(),y(e.uid),Z(e.uid)):n.push({name:"login"})}))}));var P=function(e){"non-aktif"!==s.value?(n.push({name:e}),console.log("Navigating to menu ".concat(e))):M("Akun Anda belum aktif. Silakan hubungi admin untuk mengaktifkan.","danger")};return function(e,n){var c=(0,r.up)("center"),d=(0,r.up)("ion-icon"),f=(0,r.up)("ion-badge");return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.W2),{class:"home-page"},{default:(0,r.w5)((function(){return[(0,r._)("div",de,[fe,pe,(0,r._)("div",me,[(0,r._)("div",ve,[(0,r.Wm)((0,u.SU)(i.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)((0,u.SU)(ce)(new Date)),1)]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.FN),null,{default:(0,r.w5)((function(){return[ke,(0,r.Wm)(c,null,{default:(0,r.w5)((function(){return[(0,r._)("h1",null,"Hallo Selamat datang Guru, "+(0,U.zw)(t.value)+"!",1)]})),_:1}),(0,r._)("div",ge,[(0,r.Wm)((0,u.SU)(i.YG),{color:o.value?"warning":"danger",onClick:A},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(l.value),1)]})),_:1},8,["color"])])]})),_:1})]})),_:1})]),he,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Menu")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===s.value}]),onClick:n[0]||(n[0]=(0,a.iM)((function(e){return P("tambahsoalGuru")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(d,{icon:(0,u.SU)(v.W3$),size:"large",style:{color:"#fff"}},null,8,["icon"]),we],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===s.value}]),onClick:n[1]||(n[1]=(0,a.iM)((function(e){return P("tambahmateriGuru")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(d,{icon:(0,u.SU)(v.W3$),size:"large",style:{color:"#fff"}},null,8,["icon"]),be],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===s.value}]),onClick:n[2]||(n[2]=(0,a.iM)((function(e){return P("buatujianGuru")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(d,{icon:(0,u.SU)(v.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),Ue],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===s.value}]),onClick:n[3]||(n[3]=(0,a.iM)((function(e){return P("lihatHasilUjianGuru")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(d,{icon:(0,u.SU)(v.A7i),size:"large",style:{color:"#fff"}},null,8,["icon"]),_e],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"12"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===s.value}]),onClick:n[4]||(n[4]=(0,a.iM)((function(e){return P("halamansettingGuru")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(d,{icon:(0,u.SU)(v.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),xe],2)]})),_:1})]})),_:1})]})),_:1}),Se,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Laporan Absen Mingguan")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Ie),{key:e.date},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r._)("h2",null,(0,U.zw)(H(e.date)),1),(0,r._)("p",null,[(0,r.Uk)(" Masuk: "),(0,r.Wm)(f,{color:N(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.masuk?e.masuk.toDate().toLocaleString():"Belum absen masuk"),1)]})),_:2},1032,["color"])]),(0,r._)("p",null," Keluar: "+(0,U.zw)(e.keluar?e.keluar.toDate().toLocaleString():"Belum absen keluar"),1),N(e.masuk)?((0,r.wg)(),(0,r.iD)("p",ye,[(0,r.Uk)(" Terlambat: "),(0,r.Wm)(f,{color:N(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(j(e.masuk)),1)]})),_:2},1032,["color"])])):((0,r.wg)(),(0,r.iD)("p",We,[(0,r.Wm)(f,{color:"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Tepat Waktu")]})),_:1})]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]),(0,r.Wm)((0,u.SU)(i.Px),{"is-open":h.value.isOpen,message:h.value.message,duration:h.value.duration,color:h.value.color,onDidDismiss:n[5]||(n[5]=function(e){return h.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},De=Ze,Ie=De;var Ae={class:"main_content_div"},Me=(0,r._)("div",{class:"user_div"},[(0,r._)("h2")],-1),ze=(0,r._)("div",{class:"top-radius"},null,-1),Ce={class:"content_div"},Ne={class:"card-heading ion-padding"},je=(0,r._)("br",null,null,-1),He=(0,r._)("br",null,null,-1),Pe={class:"absen-buttons"},Te=(0,r._)("br",null,null,-1),Oe=(0,r._)("p",{style:{color:"#fff"}},[(0,r.Uk)(" Ajukan "),(0,r._)("br"),(0,r.Uk)(" Izin ")],-1),Le=(0,r._)("p",{style:{color:"#fff"}},[(0,r.Uk)(" Lap"),(0,r._)("br"),(0,r.Uk)(" Kehadiran ")],-1),Ee=(0,r._)("p",{style:{color:"#fff"}},[(0,r.Uk)("Materi "),(0,r._)("br"),(0,r.Uk)("Materi")],-1),Je=(0,r._)("p",{style:{color:"#fff"}},[(0,r.Uk)("Ujian"),(0,r._)("br")],-1),Ke=(0,r._)("p",{style:{color:"#fff"}},"Lihat Hasil Ujian",-1),Qe=(0,r._)("p",{style:{color:"#fff"}},"Checkup",-1),Ge=(0,r._)("br",null,null,-1),Ye={key:0},Re={key:1};const Be={__name:"SiswaPage",setup:function(e){var n=(0,k.tv)(),t=(0,u.iH)(""),s=(0,u.iH)(""),o=(0,u.iH)(""),l=(0,u.iH)(""),f=(0,u.iH)(!0),g=(0,u.iH)("Absen Masuk"),h=(0,u.iH)([]),w=(0,u.iH)([]),b=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),_=(0,u.iH)(null),x=(0,p.v0)(R.H),S=(0,m.ad)(R.H),y=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(S,"users",n));case 3:if(t=e.sent,!t.exists()){e.next=11;break}return a=t.data(),s.value=a.fullName,o.value=a.kelas,l.value=a.status,e.next=11,W(a.kelas);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(S,"kelas",n));case 3:a=e.sent,a.exists()&&(r=a.data(),t.value=r.name),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching class data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(S,"settings","coordinates"));case 3:n=e.sent,n.exists()&&(_.value=n.data()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,m.hJ)(S,"attendance",n,"records"),a=(0,m.IO)(t,(0,m.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,m.PL)(a);case 5:r=e.sent,h.value=r.docs.map((function(e){return(0,Y.Z)({date:e.id},e.data())})),I(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=new Date,n=e.getDay(),t=new Date(e);t.setDate(e.getDate()-n+(0===n?-6:1));var a=new Date(t);a.setDate(t.getDate()+6),w.value=[];for(var r=function(){var e=u.toISOString().split("T")[0],n=h.value.find((function(n){return n.date===e}));w.value.push(n||{date:e,masuk:null,keluar:null})},u=new Date(t);u<=e;u.setDate(u.getDate()+1))r()},A=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(new Date).toISOString().split("T")[0],a=(0,m.JU)(S,"attendance",n,"records",t),e.prev=2,e.next=5,(0,m.QT)(a);case 5:r=e.sent,r.exists()?r.data().keluar?(f.value=!0,g.value="Absen Masuk"):(f.value=!1,g.value="Absen Keluar"):(f.value=!0,g.value="Absen Masuk"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error checking absen status:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),M=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=x.currentUser,!n){e.next=33;break}if("non-aktif"!==l.value){e.next=5;break}return N("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,j();case 7:if(t=e.sent,t){e.next=11;break}return N("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(S,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,!r.exists()||!r.data().masuk){e.next=19;break}return N("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.pl)(a,{masuk:(0,m.Bt)()},{merge:!0});case 21:console.log("Absen masuk berhasil"),N("Absen masuk berhasil","success"),f.value=!1,g.value="Absen Keluar",D(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting masuk time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=x.currentUser,!n){e.next=33;break}if("non-aktif"!==l.value){e.next=5;break}return N("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,j();case 7:if(t=e.sent,t){e.next=11;break}return N("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(S,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,r.exists()&&!r.data().keluar){e.next=19;break}return N("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.r7)(a,{keluar:(0,m.Bt)()});case 21:console.log("Absen keluar berhasil"),N("Absen keluar berhasil","success"),f.value=!0,g.value="Absen Masuk",D(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting keluar time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!f.value){e.next=5;break}return e.next=3,M();case 3:e.next=7;break;case 5:return e.next=7,z();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e,n){b.value={isOpen:!0,message:e,duration:2e3,color:n}},j=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var t=n.coords.latitude,a=n.coords.longitude,r=H(t,a,_.value.latitude,_.value.longitude),u=.1;e(r<=u)}),(function(n){console.error("Error getting geolocation:",n),e(!1)})):(console.error("Geolocation is not supported by this browser."),e(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e,n,t,a){var r=function(e){return e*Math.PI/180},u=6371,i=r(t-e),s=r(a-n),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r(e))*Math.cos(r(t))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=u*l;return c},P=function(e){if(!e)return!1;var n=e.toDate?e.toDate():new Date(e);if(isNaN(n.getTime()))return!1;var t=new Date(n);return t.setHours(8,0,0,0),n>t},T=function(e){if(!e)return"0 menit";var n=e.toDate?e.toDate():new Date(e);if(isNaN(n.getTime()))return"0 menit";var t=new Date(n);t.setHours(8,0,0,0);var a=n-t,r=Math.floor(a/36e5),u=Math.floor(a%36e5/6e4);return"".concat(r," jam ").concat(u," menit")},O=function(e){var n=new Date(e),t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],a=t[n.getDay()],r=n.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return"".concat(a,", ").concat(r)};(0,r.bv)((function(){(0,p.Aj)(x,(function(e){e?(y(e.uid),Z(),D(e.uid),A(e.uid)):n.push({name:"login"})}))}));var L=function(e){"non-aktif"!==l.value?(n.push({name:e}),console.log("Navigating to menu ".concat(e))):N("Akun Anda belum aktif. Silakan hubungi admin untuk mengaktifkan.","danger")};return function(e,n){var o=(0,r.up)("center"),c=(0,r.up)("ion-icon"),d=(0,r.up)("ion-badge");return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.W2),{class:"home-page"},{default:(0,r.w5)((function(){return[(0,r._)("div",Ae,[Me,ze,(0,r._)("div",Ce,[(0,r._)("div",Ne,[(0,r.Wm)((0,u.SU)(i.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)((0,u.SU)(ce)(new Date)),1)]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.FN),null,{default:(0,r.w5)((function(){return[je,(0,r.Wm)(o,null,{default:(0,r.w5)((function(){return[(0,r._)("h5",null,[(0,r.Uk)("Hallo Selamat datang Siswa, "),He,(0,r.Uk)((0,U.zw)(s.value)+"!",1)]),(0,r._)("h4",null,"Kelas "+(0,U.zw)(t.value),1)]})),_:1}),(0,r._)("div",Pe,[(0,r.Wm)((0,u.SU)(i.YG),{color:f.value?"warning":"danger",onClick:C},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(g.value),1)]})),_:1},8,["color"])])]})),_:1})]})),_:1})]),Te,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Menu")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),{size:"4"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[0]||(n[0]=(0,a.iM)((function(e){return L("laporanizinUser")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),Oe],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"4"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[1]||(n[1]=(0,a.iM)((function(e){return L("laporankehadiranUser")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),Le],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"4"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[2]||(n[2]=(0,a.iM)((function(e){return L("lihatmaterimateri")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.W3$),size:"large",style:{color:"#fff"}},null,8,["icon"]),Ee],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[3]||(n[3]=(0,a.iM)((function(e){return L("jadwalujianUser")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.W3$),size:"large",style:{color:"#fff"}},null,8,["icon"]),Je],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[4]||(n[4]=(0,a.iM)((function(e){return L("lihathasilujianUser")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.AmN),size:"large",style:{color:"#fff"}},null,8,["icon"]),Ke],2)]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"12"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:(0,U.C_)(["menu-item",{"disabled-menu":"non-aktif"===l.value}]),onClick:n[5]||(n[5]=(0,a.iM)((function(e){return L("halamansettingUser")}),["prevent"])),style:{"background-color":"#03346e","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),Qe],2)]})),_:1})]})),_:1})]})),_:1}),Ge,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Laporan Absen Mingguan")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(w.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Ie),{key:e.date},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r._)("h2",null,(0,U.zw)(O(e.date)),1),(0,r._)("p",null,[(0,r.Uk)(" Masuk: "),(0,r.Wm)(d,{color:P(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.masuk?new Date(1e3*e.masuk.seconds).toLocaleString():"Belum absen masuk"),1)]})),_:2},1032,["color"])]),(0,r._)("p",null," Keluar: "+(0,U.zw)(e.keluar?new Date(1e3*e.keluar.seconds).toLocaleString():"Belum absen keluar"),1),P(e.masuk)?((0,r.wg)(),(0,r.iD)("p",Ye,[(0,r.Uk)(" Terlambat: "),(0,r.Wm)(d,{color:P(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(T(e.masuk)),1)]})),_:2},1032,["color"])])):((0,r.wg)(),(0,r.iD)("p",Re,[(0,r.Wm)(d,{color:"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Tepat Waktu")]})),_:1})]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]),(0,r.Wm)((0,u.SU)(i.Px),{"is-open":b.value.isOpen,message:b.value.message,duration:b.value.duration,color:b.value.color,onDidDismiss:n[6]||(n[6]=function(e){return b.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},qe=Be,Ve=qe;var $e=t(6084),Fe=t(6693),Xe={class:"main_content_div"},en=(0,r._)("div",{class:"user_div"},[(0,r._)("h2")],-1),nn=(0,r._)("div",{class:"top-radius"},null,-1),tn={class:"content_div"},an={class:"card-heading ion-padding"},rn=(0,r._)("br",null,null,-1),un={class:"absen-buttons"},sn=(0,r._)("br",null,null,-1),on=(0,r._)("p",{style:{color:"#fff"}},"Ajukan Izin",-1),ln=(0,r._)("p",{style:{color:"#fff"}},"Lap Kehadiran",-1),cn=(0,r._)("p",{style:{color:"#fff"}},"Pengguna",-1),dn=(0,r._)("p",{style:{color:"#fff"}},"Checkup",-1),fn=(0,r._)("br",null,null,-1),pn={key:0},mn={key:1};const vn={__name:"PetugasPage",setup:function(e){var n=(0,k.tv)(),t=(0,u.iH)(""),s=(0,u.iH)(""),o=(0,u.iH)(!0),l=(0,u.iH)("Absen Masuk"),f=(0,u.iH)([]),g=(0,u.iH)([]),h=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),w=(0,u.iH)(null),b=(0,p.v0)(R.H),_=(0,m.ad)(R.H),x=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(_,"users",n));case 3:a=e.sent,a.exists()&&(r=a.data(),t.value=r.fullName,s.value=r.status),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching user data:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),S=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.QT)((0,m.JU)(_,"settings","coordinates"));case 3:n=e.sent,n.exists()&&(w.value=n.data()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Error fetching coordinates:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(0,m.hJ)(_,"attendance",n,"records"),a=(0,m.IO)(t,(0,m.Xo)("masuk","desc")),e.prev=2,e.next=5,(0,m.PL)(a);case 5:r=e.sent,f.value=r.docs.map((function(e){return(0,Y.Z)({date:e.id},e.data())})),W(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),console.error("Error fetching attendance records:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=new Date,n=e.getDay(),t=new Date(e);t.setDate(e.getDate()-n+(0===n?-6:1));var a=new Date(t);a.setDate(t.getDate()+6),g.value=[];for(var r=function(){var e=u.toISOString().split("T")[0],n=f.value.find((function(n){return n.date===e}));g.value.push(n||{date:e,masuk:null,keluar:null})},u=new Date(t);u<=e;u.setDate(u.getDate()+1))r()},Z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=(new Date).toISOString().split("T")[0],a=(0,m.JU)(_,"attendance",n,"records",t),e.prev=2,e.next=5,(0,m.QT)(a);case 5:r=e.sent,r.exists()?r.data().keluar?(o.value=!0,l.value="Absen Masuk"):(o.value=!1,l.value="Absen Keluar"):(o.value=!0,l.value="Absen Masuk"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.error("Error checking absen status:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.currentUser,!n){e.next=33;break}if("non-aktif"!==s.value){e.next=5;break}return C("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,N();case 7:if(t=e.sent,t){e.next=11;break}return C("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(_,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,!r.exists()||!r.data().masuk){e.next=19;break}return C("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.pl)(a,{masuk:(0,m.Bt)()},{merge:!0});case 21:console.log("Absen masuk berhasil"),C("Absen masuk berhasil","success"),o.value=!1,l.value="Absen Keluar",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting masuk time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n,t,a,r;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.currentUser,!n){e.next=33;break}if("non-aktif"!==s.value){e.next=5;break}return C("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,N();case 7:if(t=e.sent,t){e.next=11;break}return C("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return a=(0,m.JU)(_,"attendance",n.uid,"records",(new Date).toISOString().split("T")[0]),e.prev=12,e.next=15,(0,m.QT)(a);case 15:if(r=e.sent,r.exists()&&!r.data().keluar){e.next=19;break}return C("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 19:return e.next=21,(0,m.r7)(a,{keluar:(0,m.Bt)()});case 21:console.log("Absen keluar berhasil"),C("Absen keluar berhasil","success"),o.value=!0,l.value="Absen Masuk",y(n.uid),e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](12),console.error("Error setting keluar time:",e.t0);case 31:e.next=34;break;case 33:console.log("User tidak terautentikasi");case 34:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o.value){e.next=5;break}return e.next=3,D();case 3:e.next=7;break;case 5:return e.next=7,I();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fe.mR.checkPermission({force:!0});case 3:return e.next=5,Fe.mR.hideBackground();case 5:return e.next=7,Fe.mR.startScan();case 7:n=e.sent,n.hasContent&&z(n.content),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),console.error("Error scanning QR code:",e.t0),C("Error scanning QR code","danger");case 15:return e.prev=15,Fe.mR.showBackground(),Fe.mR.stopScan(),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[0,11,15,19]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var t,a,r,u,i,d,f,p;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=b.currentUser,!t){e.next=46;break}if("non-aktif"!==s.value){e.next=5;break}return C("Status Anda non-aktif. Anda tidak dapat melakukan absensi.","danger"),e.abrupt("return");case 5:return e.next=7,N();case 7:if(a=e.sent,a){e.next=11;break}return C("Lokasi Anda tidak sesuai untuk absensi.","danger"),e.abrupt("return");case 11:return r=n.split("|"),u=(0,$e.Z)(r,2),i=u[0],d=u[1],f=(0,m.JU)(_,"attendance",t.uid,"records",new Date(d).toISOString().split("T")[0]),e.prev=13,e.next=16,(0,m.QT)(f);case 16:if(p=e.sent,"masuk"!==i){e.next=28;break}if(!p.exists()||!p.data().masuk){e.next=21;break}return C("Anda sudah melakukan absensi masuk hari ini.","danger"),e.abrupt("return");case 21:return e.next=23,(0,m.pl)(f,{masuk:new Date(d)},{merge:!0});case 23:C("Absen masuk berhasil","success"),o.value=!1,l.value="Absen Keluar",e.next=37;break;case 28:if("keluar"!==i){e.next=37;break}if(p.exists()&&!p.data().keluar){e.next=32;break}return C("Anda belum melakukan absensi masuk atau sudah melakukan absensi keluar hari ini.","danger"),e.abrupt("return");case 32:return e.next=34,(0,m.r7)(f,{keluar:new Date(d)});case 34:C("Absen keluar berhasil","success"),o.value=!0,l.value="Absen Masuk";case 37:y(t.uid),e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](13),console.error("Error processing QR code:",e.t0),C("Error processing QR code","danger");case 44:e.next=47;break;case 46:C("User tidak terautentikasi","danger");case 47:case"end":return e.stop()}}),e,null,[[13,40]])})));return function(n){return e.apply(this,arguments)}}(),C=function(e,n){h.value={isOpen:!0,message:e,duration:2e3,color:n}},N=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var t=n.coords.latitude,a=n.coords.longitude,r=j(t,a,w.value.latitude,w.value.longitude),u=.1;e(r<=u)}),(function(n){console.error("Error getting geolocation:",n),e(!1)})):(console.error("Geolocation is not supported by this browser."),e(!1))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e,n,t,a){var r=function(e){return e*Math.PI/180},u=6371,i=r(t-e),s=r(a-n),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(r(e))*Math.cos(r(t))*Math.sin(s/2)*Math.sin(s/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=u*l;return c},H=function(e){if(!e)return!1;var n=e.toDate(),t=new Date(n);return t.setHours(8,0,0,0),n>t},P=function(e){if(!e)return"0 menit";var n=e.toDate(),t=new Date(n);t.setHours(8,0,0,0);var a=n-t,r=Math.floor(a/36e5),u=Math.floor(a%36e5/6e4);return"".concat(r," jam ").concat(u," menit")},T=function(e){var n=new Date(e),t=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],a=t[n.getDay()],r=n.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return"".concat(a,", ").concat(r)};(0,r.bv)((function(){(0,p.Aj)(b,(function(e){e?(x(e.uid),S(),y(e.uid),Z(e.uid)):n.push({name:"login"})}))}));var O=function(e){n.push({name:e}),console.log("Navigating to menu ".concat(e))};return function(e,n){var s=(0,r.up)("center"),c=(0,r.up)("ion-icon"),d=(0,r.up)("ion-badge");return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.W2),{class:"home-page"},{default:(0,r.w5)((function(){return[(0,r._)("div",Xe,[en,nn,(0,r._)("div",tn,[(0,r._)("div",an,[(0,r.Wm)((0,u.SU)(i.PM),{style:{margin:"0","border-radius":"18px"}},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Zi),{style:{padding:"10px"},class:"flex-between"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.tO),{class:"ion-text-capitalize",style:{margin:"0","font-size":"0.8rem"}},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)((0,u.SU)(ce)(new Date)),1)]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.FN),null,{default:(0,r.w5)((function(){return[rn,(0,r.Wm)(s,null,{default:(0,r.w5)((function(){return[(0,r._)("h1",null,"Hallo Selamat datang Staf, "+(0,U.zw)(t.value)+"!",1)]})),_:1}),(0,r._)("div",un,[(0,r.Wm)((0,u.SU)(i.YG),{color:o.value?"secondary":"danger",onClick:A},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(l.value),1)]})),_:1},8,["color"]),(0,r.Wm)((0,u.SU)(i.YG),{color:"secondary",onClick:M},{default:(0,r.w5)((function(){return[(0,r.Uk)("Scan QR Code")]})),_:1})])]})),_:1})]})),_:1})]),sn,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Menu")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[0]||(n[0]=(0,a.iM)((function(e){return O("laporanizinPetugas")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.yo2),size:"large",style:{color:"#fff"}},null,8,["icon"]),on])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[1]||(n[1]=(0,a.iM)((function(e){return O("laporankehadiranPetugas")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.Zty),size:"large",style:{color:"#fff"}},null,8,["icon"]),ln])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[2]||(n[2]=(0,a.iM)((function(e){return O("halamanpenggunaPetugas")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.JZY),size:"large",style:{color:"#fff"}},null,8,["icon"]),cn])]})),_:1}),(0,r.Wm)((0,u.SU)(i.wI),{size:"6"},{default:(0,r.w5)((function(){return[(0,r._)("div",{class:"menu-item",onClick:n[3]||(n[3]=(0,a.iM)((function(e){return O("halamansettingPetugas")}),["prevent"])),style:{"background-color":"#c80036","border-radius":"8px",padding:"10px"}},[(0,r.Wm)(c,{icon:(0,u.SU)(v.C$N),size:"large",style:{color:"#fff"}},null,8,["icon"]),dn])]})),_:1})]})),_:1})]})),_:1}),fn,(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Laporan Absen Mingguan")]})),_:1}),(0,r.Wm)((0,u.SU)(i.jY),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Nd),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wI),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(g.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Ie),{key:e.date},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r._)("h2",null,(0,U.zw)(T(e.date)),1),(0,r._)("p",null,[(0,r.Uk)(" Masuk: "),(0,r.Wm)(d,{color:H(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.masuk?e.masuk.toDate().toLocaleString():"Belum absen masuk"),1)]})),_:2},1032,["color"])]),(0,r._)("p",null," Keluar: "+(0,U.zw)(e.keluar?e.keluar.toDate().toLocaleString():"Belum absen keluar"),1),H(e.masuk)?((0,r.wg)(),(0,r.iD)("p",pn,[(0,r.Uk)(" Terlambat: "),(0,r.Wm)(d,{color:H(e.masuk)?"danger":"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(P(e.masuk)),1)]})),_:2},1032,["color"])])):((0,r.wg)(),(0,r.iD)("p",mn,[(0,r.Wm)(d,{color:"success"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Tepat Waktu")]})),_:1})]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]),(0,r.Wm)((0,u.SU)(i.Px),{"is-open":h.value.isOpen,message:h.value.message,duration:h.value.duration,color:h.value.color,onDidDismiss:n[4]||(n[4]=function(e){return h.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},kn=vn,gn=kn;t(6699),t(2023);var hn=function(e){return(0,r.dD)("data-v-e46e2fdc"),e=e(),(0,r.Cn)(),e},wn={key:1},bn={key:2},Un={key:3},_n={key:4},xn=hn((function(){return(0,r._)("h2",null,"Hasil Ujian dan Kehadiran Anak",-1)})),Sn={key:5},yn=hn((function(){return(0,r._)("h2",null,"Hasil Ujian",-1)}));const Wn={__name:"OrangTuaPage",setup:function(e){var n=(0,m.ad)(R.H),t=(0,p.v0)(R.H),a=(0,u.iH)(""),s=(0,u.iH)({fullName:"",kelas:""}),o=(0,u.iH)(""),l=(0,u.iH)(""),f=(0,u.iH)(!1),v=(0,u.iH)(!1),k=(0,u.iH)([]),g=(0,u.iH)([]),h=(0,u.iH)([]),w=(0,u.iH)(!1),b=(0,u.iH)({isOpen:!1,message:"",duration:2e3,color:"success"}),_=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var a,r,u;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.currentUser,!a){e.next=11;break}return r=(0,m.JU)(n,"parents",a.uid),e.next=5,(0,m.QT)(r);case 5:if(u=e.sent,u.exists()){e.next=9;break}return e.next=9,(0,m.pl)(r,{childrenNISNs:[],childrenUIDs:[]});case 9:e.next=12;break;case 11:D("Pengguna tidak terautentikasi.","danger");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var r,u,i;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.currentUser,!r){e.next=26;break}return e.prev=2,e.next=5,(0,m.QT)((0,m.JU)(n,"parents",r.uid));case 5:if(u=e.sent,!u.exists()){e.next=17;break}if(i=u.data(),k.value=i.childrenNISNs||[],g.value=i.childrenUIDs||[],!(k.value.length>0)){e.next=15;break}return v.value=!0,a.value=k.value[0],e.next=15,W(g.value[0]);case 15:e.next=18;break;case 17:D("Data orang tua tidak ditemukan.","danger");case 18:e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](2),console.error("Error fetching parent data:",e.t0),D("Terjadi kesalahan saat mengambil data orang tua.","danger");case 24:e.next=27;break;case 26:D("Pengguna tidak terautentikasi.","danger");case 27:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var t,r,u,i,o,l;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.value){e.next=3;break}return D("NISN tidak boleh kosong.","danger"),e.abrupt("return");case 3:return t=(0,m.IO)((0,m.hJ)(n,"users"),(0,m.ar)("nisn","==",a.value)),e.next=6,(0,m.PL)(t);case 6:if(r=e.sent,r.empty){e.next=20;break}return u=r.docs[0],i=u.data(),e.next=12,(0,m.QT)((0,m.JU)(n,"kelas",i.kelas));case 12:o=e.sent,l=o.exists()?o.data().name:"N/A",s.value=(0,Y.Z)((0,Y.Z)({id:u.id},i),{},{kelas:l}),f.value=!0,console.log("Student data:",s.value),D("Siswa ditemukan.","success"),e.next=23;break;case 20:s.value={fullName:"",kelas:""},f.value=!1,D("Siswa tidak ditemukan.","danger");case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(){var a,r,u;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.currentUser,!a||!s.value){e.next=36;break}return e.next=4,_();case 4:return e.prev=4,e.next=7,(0,m.QT)((0,m.JU)(n,"parents",a.uid));case 7:if(r=e.sent,u={},r.exists()&&(u=r.data()),u.childrenNISNs=u.childrenNISNs||[],u.childrenUIDs=u.childrenUIDs||[],u.childrenNISNs.includes(s.value.nisn)){e.next=27;break}return u.childrenNISNs.push(s.value.nisn),u.childrenUIDs.push(s.value.id),e.next=17,(0,m.r7)((0,m.JU)(n,"parents",a.uid),u);case 17:return k.value=u.childrenNISNs,g.value=u.childrenUIDs,v.value=!0,o.value=s.value.fullName,l.value=s.value.kelas,D("NISN berhasil disimpan.","success"),e.next=25,W(s.value.id);case 25:e.next=28;break;case 27:D("NISN sudah ada dalam daftar.","warning");case 28:e.next=34;break;case 30:e.prev=30,e.t0=e["catch"](4),console.error("Error saving NISN:",e.t0),D("Gagal menyimpan NISN.","danger");case 34:e.next=37;break;case 36:D("Tidak ada data siswa untuk disimpan.","danger");case 37:case"end":return e.stop()}}),e,null,[[4,30]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var a,r,u,i,s,f,p;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return w.value=!0,e.prev=1,e.next=4,(0,m.QT)((0,m.JU)(n,"users",t));case 4:if(a=e.sent,!a.exists()){e.next=13;break}return r=a.data(),e.next=9,(0,m.QT)((0,m.JU)(n,"kelas",r.kelas));case 9:u=e.sent,i=u.exists()?u.data().name:"N/A",o.value=r.fullName,l.value=i;case 13:return s=(0,m.hJ)(n,"examResults/".concat(t,"/results")),e.next=16,(0,m.PL)(s);case 16:if(f=e.sent,f.empty){e.next=26;break}return p=f.docs.map(function(){var e=(0,d.Z)((0,c.Z)().mark((function e(t){var a,r,u,i,s;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.data(),e.next=3,(0,m.QT)((0,m.JU)(n,"jadwal",a.jadwalId));case 3:return r=e.sent,u=r.exists()?r.data():{},e.next=7,(0,m.QT)((0,m.JU)(n,"mataPelajaran",u.mataPelajaran));case 7:return i=e.sent,e.next=10,(0,m.QT)((0,m.JU)(n,"kelas",u.kelas));case 10:return s=e.sent,e.abrupt("return",{jadwalId:a.jadwalId,score:a.score,createdAt:a.createdAt,mataPelajaran:i.exists()?i.data().name:"N/A",kelas:s.exists()?s.data().name:"N/A"});case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),e.next=21,Promise.all(p);case 21:h.value=e.sent,console.log("Hasil Ujian dan Kehadiran:",h.value),D("Data siswa berhasil ditampilkan.","success"),e.next=27;break;case 26:D("Data siswa tidak ditemukan.","danger");case 27:e.next=33;break;case 29:e.prev=29,e.t0=e["catch"](1),console.error("Error fetching child data:",e.t0),D("Gagal mengambil data siswa.","danger");case 33:return e.prev=33,w.value=!1,e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[1,29,33,36]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(e){setTimeout((0,d.Z)((0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x();case 2:e.target.complete();case 3:case"end":return n.stop()}}),n)}))),2e3)},D=function(e,n){b.value={isOpen:!0,message:e,duration:2e3,color:n}},I=function(e){if(!e)return"N/A";var n=new Date(1e3*e.seconds);return n.toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})};return(0,r.bv)((0,d.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:x();case 3:case"end":return e.stop()}}),e)})))),function(e,n){var t=(0,r.up)("ion-grid");return(0,r.wg)(),(0,r.j4)((0,u.SU)(i._i),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Gu),{mode:"ios"},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.sr),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.wd),null,{default:(0,r.w5)((function(){return[(0,r.Uk)("Hall Wali Murid")]})),_:1})]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.W2),{fullscreen:!0},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.nJ),{slot:"fixed",onIonRefresh:n[0]||(n[0]=function(e){return Z(e)})},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Wo))]})),_:1}),(0,r.Wm)((0,u.SU)(i.W2),{class:"ion-padding"},{default:(0,r.w5)((function(){return[w.value?((0,r.wg)(),(0,r.j4)((0,u.SU)(i.PQ),{key:0,name:"crescent"})):(0,r.kq)("",!0),v.value||w.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",wn,[(0,r.Wm)((0,u.SU)(i.Ie),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),{position:"floating"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Masukkan NISN Anak")]})),_:1}),(0,r.Wm)((0,u.SU)(i.pK),{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return a.value=e}),placeholder:"NISN"},null,8,["modelValue"])]})),_:1}),(0,r.Wm)((0,u.SU)(i.YG),{style:{color:"white"},expand:"block",onClick:S},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Cari Siswa ")]})),_:1})])),v.value&&!w.value?((0,r.wg)(),(0,r.iD)("div",bn,[(0,r._)("p",null,"Nama Siswa: "+(0,U.zw)(o.value),1),(0,r._)("p",null,"Kelas: "+(0,U.zw)(l.value),1),(0,r._)("p",null,"NISN Anak: "+(0,U.zw)(a.value),1)])):(0,r.kq)("",!0),!f.value||v.value||w.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",Un,[(0,r.Wm)((0,u.SU)(i.PM),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Zi),null,{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Dq),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(s.value.fullName),1)]})),_:1}),(0,r.Wm)((0,u.SU)(i.tO),null,{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(s.value.kelas),1)]})),_:1})]})),_:1}),(0,r.Wm)((0,u.SU)(i.FN),null,{default:(0,r.w5)((function(){return[(0,r._)("p",null,"NISN: "+(0,U.zw)(s.value.nisn),1),(0,r.Wm)((0,u.SU)(i.YG),{style:{color:"white"},expand:"block",onClick:y},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Simpan NISN ")]})),_:1})]})),_:1})]})),_:1})])),g.value.length>0&&!w.value?((0,r.wg)(),(0,r.iD)("div",_n,[xn,(0,r.Wm)((0,u.SU)(i.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(k.value,(function(e,n){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Ie),{key:e},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),{onClick:function(e){return W(g.value[n])}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" NISN: "+(0,U.zw)(e),1)]})),_:2},1032,["onClick"])]})),_:2},1024)})),128))]})),_:1})])):(0,r.kq)("",!0),h.value.length>0&&!w.value?((0,r.wg)(),(0,r.iD)("div",Sn,[yn,(0,r.Wm)((0,u.SU)(i.q_),null,{default:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.value,(function(e){return(0,r.wg)(),(0,r.j4)((0,u.SU)(i.Ie),{key:e.jadwalId},{default:(0,r.w5)((function(){return[(0,r.Wm)((0,u.SU)(i.Q$),null,{default:(0,r.w5)((function(){return[(0,r._)("h3",null,"Jadwal ID: "+(0,U.zw)(e.jadwalId),1),(0,r._)("p",null,"Mata Pelajaran: "+(0,U.zw)(e.mataPelajaran),1),(0,r._)("p",null,"Kelas: "+(0,U.zw)(e.kelas),1),(0,r._)("p",null,[(0,r.Uk)(" Nilai: "),(0,r.Wm)((0,u.SU)(i.yp),{color:e.score>=65?"success":"danger"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,U.zw)(e.score),1)]})),_:2},1032,["color"])]),(0,r._)("p",null,"Tanggal: "+(0,U.zw)(I(e.createdAt)),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])):(0,r.kq)("",!0)]})),_:1}),(0,r.Wm)(t,{class:"ion-padding"}),(0,r.Wm)((0,u.SU)(i.Px),{"is-open":b.value.isOpen,message:b.value.message,duration:b.value.duration,color:b.value.color,onDidDismiss:n[2]||(n[2]=function(){return b.value.isOpen=!1})},null,8,["is-open","message","duration","color"])]})),_:1})]})),_:1})}}},Zn=(0,h.Z)(Wn,[["__scopeId","data-v-e46e2fdc"]]),Dn=Zn;var In=[{path:"/",redirect:"/page"},{path:"/login",name:"login",component:function(){return t.e(554).then(t.bind(t,6554))}},{path:"/splash",name:"splash",component:function(){return t.e(444).then(t.bind(t,1444))}},{path:"/page/",component:b,children:[{path:"",redirect:"/page/home"},{path:"home",name:"home",meta:{requiresAuth:!0},beforeEnter:function(e,n,t){var a=(0,p.v0)(),r=(0,m.ad)(),u=function(){var e=(0,d.Z)((0,c.Z)().mark((function e(n){var a,u,i;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,(0,m.QT)((0,m.JU)(r,"users",n.uid));case 3:a=e.sent,a.exists()?(u=a.data(),i=u.role,"admin"===i?t({name:"admin"}):"guru"===i||"petugas"===i?t({name:"guru"}):"siswa"===i?t({name:"siswa"}):t()):t({name:"login"}),e.next=8;break;case 7:t({name:"login"});case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,p.Aj)(a,(function(e){e?u(e)["catch"]((function(e){console.error(e),t({name:"login"})})):t({name:"login"})}))}},{path:"/siswa",name:"siswa",component:Ve},{path:"/admin",name:"admin",component:le},{path:"/guru",name:"guru",component:Ie},{path:"/petugas",name:"petugas",component:gn},{path:"/orangtua",name:"orangtua",component:Dn},{path:"soalsoal/:menuId",name:"soalsoal",component:function(){return t.e(857).then(t.bind(t,2857))}},{path:"admin/laporankehadiran",name:"laporankehadiranAdmin",component:function(){return t.e(627).then(t.bind(t,1627))}},{path:"admin/laporanizin",name:"laporanizinAdmin",component:function(){return t.e(135).then(t.bind(t,2249))}},{path:"admin/halamanpengguna",name:"halamanpenggunaAdmin",component:function(){return t.e(556).then(t.bind(t,8556))}},{path:"admin/halamansetting",name:"halamansettingAdmin",component:function(){return t.e(215).then(t.bind(t,5215))}},{path:"admin/halamankelas",name:"halamankelas",component:function(){return t.e(476).then(t.bind(t,6476))}},{path:"admin/halamanmatapelajaran",name:"halamanmatapelajaran",component:function(){return t.e(623).then(t.bind(t,4623))}},{path:"guru/laporankehadiran",name:"laporankehadiranGuru",component:function(){return t.e(552).then(t.bind(t,8552))}},{path:"guru/laporanizin",name:"laporanizinGuru",component:function(){return t.e(802).then(t.bind(t,6802))}},{path:"guru/halamanpengguna",name:"halamanpenggunaGuru",component:function(){return t.e(874).then(t.bind(t,1874))}},{path:"guru/halamansetting",name:"halamansettingGuru",component:function(){return Promise.all([t.e(650),t.e(473)]).then(t.bind(t,4473))}},{path:"guru/tambahsoal",name:"tambahsoalGuru",component:function(){return Promise.all([t.e(650),t.e(400),t.e(246)]).then(t.bind(t,7246))}},{path:"guru/tambahmateri",name:"tambahmateriGuru",component:function(){return Promise.all([t.e(650),t.e(400),t.e(4)]).then(t.bind(t,4))}},{path:"guru/buatujian",name:"buatujianGuru",component:function(){return t.e(366).then(t.bind(t,6487))}},{path:"guru/lihathasilujianguru",name:"lihatHasilUjianGuru",component:function(){return t.e(482).then(t.bind(t,7482))}},{path:"petugas/laporankehadiran",name:"laporankehadiranPetugas",component:function(){return t.e(928).then(t.bind(t,6928))}},{path:"petugas/laporanizin",name:"laporanizinPetugas",component:function(){return t.e(792).then(t.bind(t,4792))}},{path:"petugas/halamanpengguna",name:"halamanpenggunaPetugas",component:function(){return t.e(238).then(t.bind(t,1238))}},{path:"petugas/halamansetting",name:"halamansettingPetugas",component:function(){return t.e(845).then(t.bind(t,3845))}},{path:"user/laporankehadiran",name:"laporankehadiranUser",component:function(){return t.e(898).then(t.bind(t,1898))}},{path:"user/laporanizin",name:"laporanizinUser",component:function(){return t.e(259).then(t.bind(t,9259))}},{path:"user/halamanpengguna",name:"halamanpenggunaUser",component:function(){return t.e(748).then(t.bind(t,5748))}},{path:"user/halamansetting",name:"halamansettingUser",component:function(){return Promise.all([t.e(650),t.e(336)]).then(t.bind(t,9336))}},{path:"user/halamanujian/:jadwalId",name:"halamanujianUser",component:function(){return t.e(620).then(t.bind(t,3620))}},{path:"user/jadwalujian",name:"jadwalujianUser",component:function(){return t.e(120).then(t.bind(t,3120))}},{path:"user/lihathasilujian",name:"lihathasilujianUser",component:function(){return t.e(679).then(t.bind(t,6679))}},{path:"user/lihatmaterimateri",name:"lihatmaterimateri",component:function(){return t.e(49).then(t.bind(t,3049))}}]},{path:"/register",name:"register",component:Q}],An=(0,f.p7)({history:(0,f.PO)("/"),routes:In});const Mn=An;t(5040),t(8851),t(1292),t(1633),t(1045),t(6187),t(2299),t(3423),t(4687),t(9147),t(6250);var zn=t(4055),Cn=t(3977),Nn={apiKey:"AIzaSyAyptyOrgdjmR8VB1CGTokCcFPyR7QrKIw",authDomain:"absensi-6189c.firebaseapp.com",databaseURL:"https://absensi-6189c-default-rtdb.firebaseio.com",projectId:"absensi-6189c",storageBucket:"absensi-6189c.appspot.com",messagingSenderId:"512823944472",appId:"1:512823944472:web:eea70090a20105b850aa6d",measurementId:"G-HMH63RKJNX"},jn=(0,Cn.ZF)(Nn),Hn=(0,a.ri)(l).component("swiper",zn.tq).component("swiper-slide",zn.o5).use(i.oX,{mode:"ios"}).use(Mn);Hn.config.globalProperties.$firebase=jn,Mn.isReady().then((function(){Hn.mount("#app")}))},5856:(e,n,t)=>{"use strict";t.d(n,{H:()=>u});var a=t(3977),r={apiKey:"AIzaSyAyptyOrgdjmR8VB1CGTokCcFPyR7QrKIw",authDomain:"absensi-6189c.firebaseapp.com",databaseURL:"https://absensi-6189c-default-rtdb.firebaseio.com",projectId:"absensi-6189c",storageBucket:"absensi-6189c.appspot.com",messagingSenderId:"512823944472",appId:"1:512823944472:web:eea70090a20105b850aa6d",measurementId:"G-HMH63RKJNX"},u=(0,a.ZF)(r)}},n={};function t(a){var r=n[a];if(void 0!==r)return r.exports;var u=n[a]={id:a,loaded:!1,exports:{}};return e[a].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}t.m=e,(()=>{var e=[];t.O=(n,a,r,u)=>{if(!a){var i=1/0;for(c=0;c<e.length;c++){for(var[a,r,u]=e[c],s=!0,o=0;o<a.length;o++)(!1&u||i>=u)&&Object.keys(t.O).every((e=>t.O[e](a[o])))?a.splice(o--,1):(s=!1,u<i&&(i=u));if(s){e.splice(c--,1);var l=r();void 0!==l&&(n=l)}}return n}u=u||0;for(var c=e.length;c>0&&e[c-1][2]>u;c--)e[c]=e[c-1];e[c]=[a,r,u]}})(),(()=>{t.d=(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((n,a)=>(t.f[a](e,n),n)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{4:"61345639",49:"4143da1e",74:"1bed7068",78:"b7e01386",120:"c3b6e1ed",135:"d48eaecb",215:"302bef91",238:"5504a79d",246:"5a0b9a76",259:"b7ffc976",321:"a4e2b2ce",336:"03e09a8b",338:"90b13988",366:"d4dcf9e8",400:"35e9ab12",444:"8a6966f5",473:"5684dab0",476:"ed36923c",482:"b85469e1",486:"c028a8a5",552:"39d47173",553:"0d1fd7ed",554:"8548a574",556:"dbbdb0be",576:"8b89589e",620:"8b58107a",623:"d10cc38c",627:"2ba80838",650:"d253c95b",679:"d69d0fcb",748:"255fb619",753:"409f699d",775:"ecd8962e",792:"1f2c4f70",802:"48da5f89",845:"0b11b8f3",857:"b9f636ab",874:"1371b8a2",898:"c387d308",928:"9f847681",990:"d8578090"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+e+"."+{4:"e35e6b75",49:"b9f06302",120:"2a02d4dc",135:"2a02d4dc",246:"2546f314",259:"2a02d4dc",336:"53b65d50",366:"bf49cd70",444:"be6e1e8b",476:"460859b8",482:"ae907948",554:"c6a93f7d",556:"e6c63322",620:"6281294a",623:"7ee4a047",627:"c491b6ec",679:"63d9ec6b",857:"584d91c7"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)})(),(()=>{var e={},n="resep-bunda:";t.l=(a,r,u,i)=>{if(e[a])e[a].push(r);else{var s,o;if(void 0!==u)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==n+u){s=d;break}}s||(o=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",n+u),s.src=a),e[a]=[r];var f=(n,t)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(t))),n)return n(t)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),o&&document.head.appendChild(s)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{t.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,n,t,a,r)=>{var u=document.createElement("link");u.rel="stylesheet",u.type="text/css";var i=t=>{if(u.onerror=u.onload=null,"load"===t.type)a();else{var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.href||n,o=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");o.code="CSS_CHUNK_LOAD_FAILED",o.type=i,o.request=s,u.parentNode&&u.parentNode.removeChild(u),r(o)}};return u.onerror=u.onload=i,u.href=n,t?t.parentNode.insertBefore(u,t.nextSibling):document.head.appendChild(u),u},n=(e,n)=>{for(var t=document.getElementsByTagName("link"),a=0;a<t.length;a++){var r=t[a],u=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(u===e||u===n))return r}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){r=i[a],u=r.getAttribute("data-href");if(u===e||u===n)return r}},a=a=>new Promise(((r,u)=>{var i=t.miniCssF(a),s=t.p+i;if(n(i,s))return r();e(a,s,null,r,u)})),r={143:0};t.f.miniCss=(e,n)=>{var t={4:1,49:1,120:1,135:1,246:1,259:1,336:1,366:1,444:1,476:1,482:1,554:1,556:1,620:1,623:1,627:1,679:1,857:1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=a(e).then((()=>{r[e]=0}),(n=>{throw delete r[e],n})))}}})(),(()=>{var e={143:0};t.f.j=(n,a)=>{var r=t.o(e,n)?e[n]:void 0;if(0!==r)if(r)a.push(r[2]);else{var u=new Promise(((t,a)=>r=e[n]=[t,a]));a.push(r[2]=u);var i=t.p+t.u(n),s=new Error,o=a=>{if(t.o(e,n)&&(r=e[n],0!==r&&(e[n]=void 0),r)){var u=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;s.message="Loading chunk "+n+" failed.\n("+u+": "+i+")",s.name="ChunkLoadError",s.type=u,s.request=i,r[1](s)}};t.l(i,o,"chunk-"+n,n)}},t.O.j=n=>0===e[n];var n=(n,a)=>{var r,u,[i,s,o]=a,l=0;if(i.some((n=>0!==e[n]))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(o)var c=o(t)}for(n&&n(a);l<i.length;l++)u=i[l],t.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return t.O(c)},a=self["webpackChunkresep_bunda"]=self["webpackChunkresep_bunda"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))})();var a=t.O(void 0,[998],(()=>t(5366)));a=t.O(a)})();
//# sourceMappingURL=app.3a52ad4e.js.map